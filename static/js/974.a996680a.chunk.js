"use strict";(self.webpackChunkvialand=self.webpackChunkvialand||[]).push([[974],{3974:function(e,n,t){t.r(n),t.d(n,{default:function(){return w}});var a=t(9439),r=t(2419),c=t(8468),u=t(7313),s=t(4511),i=t(7864),l=t(8512),o=t(3433),p=t(1413),f=t(4165),d=t(5861),h=t(4925),x=t(573),v=t(6791),m=t(3737),Z=t(6243),b=["execute"];var j=t(6417),g=(0,u.memo)((function(e){var n=e.data,t=void 0===n?[]:n;return(0,j.jsx)(j.Fragment,{children:t.map((function(e){return(0,j.jsx)(r.eu,{data:e},e.id)}))})}));function w(){var e=(0,s.$)().t,n=(0,u.useRef)(null),t=(0,u.useRef)(null),w=(0,c.K)(),N=(0,a.Z)(w,2),k=N[0],y=N[1],L=function(e,n){var t=(0,u.useState)(!1),r=(0,a.Z)(t,2),c=r[0],s=r[1],i=(0,u.useState)([]),l=(0,a.Z)(i,2),j=l[0],g=l[1],w=(0,u.useState)(void 0),N=(0,a.Z)(w,2),k=N[0],y=N[1],L=(0,v.r)((function(){return S.apply(this,arguments)}),!1),C=L.execute,E=(0,h.Z)(L,b);function R(){return(R=(0,d.Z)((0,f.Z)().mark((function e(){var n;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C();case 3:(n=e.sent)&&g((function(e){return[].concat((0,o.Z)(e),(0,o.Z)(n))})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function S(){return(S=(0,d.Z)((0,f.Z)().mark((function e(){var t,a,r,c,u;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=[],n&&t.push((0,x.ar)("contactNumber","==",n)),k&&t.push((0,x.TQ)(k)),a=x.IO.apply(void 0,[(0,x.hJ)(Z.db,"properties"),(0,x.Xo)("createdAt","desc")].concat(t,[(0,x.ar)("published","==",!0),(0,x.b9)(10)])),r=[],e.next=8,(0,x.PL)(a);case 8:return c=e.sent,u=c.docs[c.docs.length-1],c.forEach((function(e){r.push(e.data())})),y(u),s(!1),e.abrupt("return",r);case 16:e.prev=16,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}(0,m.M)({ref:e,canLoadMore:!!k,loading:E.isLoading,fetchFn:function(){return R.apply(this,arguments)}});var A=(0,u.useCallback)((function(){g([]),y(void 0),s(!0)}),[]);return(0,u.useEffect)((function(){A()}),[n]),(0,u.useEffect)((function(){function e(){return(e=(0,d.Z)((0,f.Z)().mark((function e(){var n;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:n=e.sent,g(null!==n&&void 0!==n?n:[]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c&&function(){e.apply(this,arguments)}()}),[c]),(0,p.Z)((0,p.Z)({},E),{},{data:j,clear:A})}(n,k.phoneNumber),C=L.data,E=L.isLoading;return(0,j.jsxs)("div",{className:"p-2 md:p-5 h-full flex items-center flex-col",children:[(0,j.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,j.jsx)("input",{ref:t,defaultValue:k.phoneNumber,placeholder:"0911xxxxxx",className:"input",type:"text",maxLength:12}),(0,j.jsxs)("button",{className:"btn",type:"button",onClick:function(){if(t.current){var n=t.current.value;n&&n.match(/^[0-9]*$/)?y({phoneNumber:n.trim()}):l.Am.warn("".concat(e("invalid_phone_number")))}},children:[(0,j.jsx)(i.RB5,{}),e("search")]})]}),!E&&!(null!==C&&void 0!==C&&C.length)&&(0,j.jsx)(r.x4,{title:"Kh\xf4ng c\xf3 th\xf4ng tin"}),(0,j.jsxs)("div",{className:"max-w-[1000px] w-full flex-1 overflow-y-auto",ref:n,children:[(0,j.jsx)(g,{data:C}),E&&(0,j.jsx)(r.x4,{title:(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)(i.Z7b,{className:"animate-spin"})," ",e("searching")]})})]})]})}}}]);