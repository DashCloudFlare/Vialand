"use strict";(self.webpackChunkvialand=self.webpackChunkvialand||[]).push([[289],{4396:function(n,e,t){t.d(e,{pM:function(){return r},Cj:function(){return w.Cj},cx:function(){return m},$m:function(){return p},EC:function(){return x}});var r={};t.r(r),t.d(r,{deleteById:function(){return l},deposit:function(){return a},getAll:function(){return s},getById:function(){return d},verify:function(){return u}});var i=t(8941),o=t(9869),c=i.Z.common.baseApiUrl,s=function(n){return(0,o.Z)("GET",c+"/deposit",n).then((function(n){return n.data}))},a=function(n){return(0,o.Z)("POST",c+"/deposit",n)},u=function(n){return(0,o.Z)("PATCH",c+"/deposit/".concat(n,"/verify"))},l=function(n){return(0,o.Z)("DELETE",c+"/deposit/".concat(n))},d=function(n){return(0,o.Z)("GET",c+"/deposit/".concat(n))},f=(t(3531),i.Z.common.baseApiUrl),p=function(){return(0,o.Z)("GET",f+"/renew")},m=function(n,e,t){return(0,o.Z)("POST",f+"/news",{fbId:n,pinned:e,projectPinnedExpiredAt:t})},x=function(){return(0,o.Z)("POST",f+"/news/sync")},w=t(1716)},1716:function(n,e,t){t.d(e,{Cj:function(){return a},Pe:function(){return u},hF:function(){return l},ws:function(){return c},wt:function(){return s}});var r=t(8941),i=t(9869),o=r.Z.common.baseApiUrl+"/upload",c=function(n){var e=new FormData;return e.append("file",n),(0,i.Z)("POST",o,e)},s=function(n){return(0,i.Z)("DELETE",o,{ids:n})},a=function(n){var e=new FormData;return e.append("file",n),(0,i.Z)("POST",o+"/google-img",e)},u=function(n,e){var t=new FormData;return t.append("file",n),t.append("newsId",e),(0,i.Z)("POST",o+"/google-vid",t)},l=function(n){return(0,i.Z)("DELETE",o+"/google",{ids:n})}},9323:function(n,e,t){t.d(e,{H:function(){return p}});var r=t(4165),i=t(5861),o=t(9439),c=t(2751),s=t(6316),a=t(7313),u=t(5798),l=t(5831),d=t(8469),f=t(2440);function p(n){var e=(0,a.useState)(""),t=(0,o.Z)(e,2),p=t[0],m=t[1],x=(0,l.s)().socket;return(0,a.useEffect)((function(){var e=(0,c.x0)(8);x.emit(u.Q.initNewsAdd,e);var t="".concat(window.location.origin,"/upload?sessionId=").concat(e);s.toString(t,(function(n,e){n||m(e)})),x.on(u.Q.imageUploaded(e),function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new File([t],"payment-image.webp",{type:"image/webp"}),e.next=3,(0,f.vZ)(i);case 3:i.src=e.sent,i.id=(0,d.Wb)(),n(i);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}),[]),{sessionQR:p}}},289:function(n,e,t){t.r(e),t.d(e,{default:function(){return j}});var r=t(1413),i=t(4165),o=t(5861),c=t(9439),s=t(3061),a=t(7313),u=t(5627),l=t(4511),d=t(7864),f=t(7890),p=t(9466),m=t(8512),x=t(4396),w=t(1110),v=t(6404),h=t(5884),g=t(9323),Z=t(2440),b=t(6417);function j(){var n=(0,l.$)().t,e=(0,a.useState)(),t=(0,c.Z)(e,2),j=t[0],E=t[1],y=(0,a.useState)(""),N=(0,c.Z)(y,2),T=N[0],C=N[1],k=(0,g.H)((function(n){E(n),C(URL.createObjectURL(n))})).sessionQR,P=(0,f.s0)();(0,h.P)(!0);var S=(0,u.cI)({defaultValues:{amount:v.z1}}),A=S.handleSubmit,F=S.register;return(0,a.useEffect)((function(){document.title=n("deposit")}),[]),(0,b.jsx)("div",{className:"max-w-[1024px] px-5 xl:px-0 py-5 mx-auto h-full flex flex-col xl:flex-row gap-2",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-5",children:[(0,b.jsx)("div",{className:"col-span-1",children:(0,b.jsx)(w.qv,{isDeposit:!0,sessionQR:k})}),(0,b.jsxs)("div",{className:"col-span-1 space-y-5",children:[(0,b.jsxs)(p.rU,{className:"flex items-center gap-2 link w-fit",to:"..",children:[(0,b.jsx)(d.CF5,{className:"text-2xl"}),n("back")]}),(0,b.jsx)(w.cw,{htmlFor:"amount",label:"".concat(n("amount")," (VN\u0110)"),children:(0,b.jsx)("input",(0,r.Z)((0,r.Z)({},F("amount",{required:!0,min:v.z1})),{},{step:1e3,className:"input",placeholder:n("enter_deposit_amount"),type:"number",min:v.z1}))}),T&&(0,b.jsxs)("div",{className:"relative mx-auto w-full md:w-[259px]",children:[(0,b.jsx)("img",{className:"w-full rounded",src:T,alt:""}),(0,b.jsx)(d.oHP,{color:"#000",size:21,className:"absolute select-none rounded-full shadow cursor-pointer bg-white top-1 right-1 p-1",onClick:function(){E(null),C("")}})]}),!T&&(0,b.jsx)(w.cw,{htmlFor:"images",label:n("receipt_screenshot"),children:(0,b.jsx)(w.Ur,{accepts:Z.Gs,limitMb:v.Te,className:"mx-auto w-full",placeholder:n("upload_receipt_screenshot"),onChange:function(n){E(n[0])}})}),(0,b.jsx)("button",{type:"button",disabled:!j,className:(0,s.Z)("btn w-full mt-5",!j&&"btn--disabled"),onClick:function(){A((function(e){var t=e.amount;j&&m.Am.promise((0,o.Z)((0,i.Z)().mark((function n(){var e,r,o,c;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,x.Cj)(j);case 2:return e=n.sent,r=e.data.id,n.next=6,x.pM.deposit({amount:t,paymentImageId:r});case 6:o=n.sent,c=o.data,P("/ho-so/nap-tien/".concat(c._id));case 9:case"end":return n.stop()}}),n)}))),{pending:n("loading"),success:n("deposit_successfully"),error:n("deposit_failed")})}))()},children:n("deposit")})]})]})})}}}]);