"use strict";(self.webpackChunkvialand=self.webpackChunkvialand||[]).push([[522],{1716:function(e,t,n){n.d(t,{Cj:function(){return i},Pe:function(){return o},hF:function(){return u},ws:function(){return s},wt:function(){return l}});var a=n(8941),r=n(9869),c=a.Z.common.baseApiUrl+"/upload",s=function(e){var t=new FormData;return t.append("file",e),(0,r.Z)("POST",c,t)},l=function(e){return(0,r.Z)("DELETE",c,{ids:e})},i=function(e){var t=new FormData;return t.append("file",e),(0,r.Z)("POST",c+"/google-img",t)},o=function(e,t){var n=new FormData;return n.append("file",e),n.append("newsId",t),(0,r.Z)("POST",c+"/google-vid",n)},u=function(e){return(0,r.Z)("DELETE",c+"/google",{ids:e})}},7629:function(e,t,n){n.d(t,{PU:function(){return c},ZE:function(){return r},vh:function(){return a}});var a="\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i sau \xedt ph\xfat",r="\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng li\xean h\u1ec7 qu\u1ea3n tr\u1ecb vi\xean",c="Qu\xe1 tr\xecnh t\u1ea3i l\xean \u0111\xe3 b\u1ecb l\u1ed7i. Qu\xfd kh\xe1ch vui l\xf2ng li\xean h\u1ec7 tr\u1ef1c ti\u1ebfp v\u1edbi s\u1ed1 Hotline 0868113025 (ho\u1eb7c Zalo) \u0111\u1ec3 \u0111\u01b0\u1ee3c x\u1eed l\xfd k\u1ecbp th\u1eddi"},9522:function(e,t,n){n.r(t),n.d(t,{default:function(){return W}});var a=n(1413),r=n(4165),c=n(5861),s=n(9439),l=n(3061),i=n(658),o=n.n(i),u=n(573),d=n(9548),p=n(2751),m=n(6316),x=n(7313),h=n(5627),f=n(4511),g=n(7864),v=n(7890),w=n(8512),b=n(1716),_=n(6041),j=n(753),N=n(8298),Z=n(8941),y=n(6404),k=n(7629),S=n(200),F=n(5831),T=n(887),E=n(6243),C=n(5993),P=n(699),I=n(3027),A=function(e){var t=e.province,n=e.ward,r=e.district,c=P.find((function(e){return parseInt(e.id,10)===t})),s=I.find((function(e){return parseInt(e.id,10)===r})),l=C.find((function(e){return parseInt(e.id,10)===n})),i="".concat(s.typeName," ").concat(s.name.startsWith("Qu\u1eadn")?s.name.substring(5):s.name);return(0,a.Z)((0,a.Z)({},e),{},{provinceName:"".concat(c.typeName," ").concat(null===c||void 0===c?void 0:c.name),districtName:i,wardName:null===l||void 0===l?void 0:l.name})},L=n(8469),U=n(2440),q=n(4885),D=n(5629),M=n(6417),H=Z.Z.common,O=function(e){var t=e.action,n=e.houseType,a=e.width,r=e.length,c=e.address,s=a*r;s=Number.isInteger(s)?s:s.toFixed(2);var l=A(c),i=l.address,o=l.wardName,u=l.districtName,p=l.provinceName;return["".concat((0,d.t)(S.m3.find((function(e){return e.value===t})).name)," ").concat((0,d.t)(S.Wm.find((function(e){return e.value===n})).name)," ").concat(s,"m\xb2 (").concat(a," x ").concat(r,"m)"),"".concat(i,", ").concat(o,", ").concat(u,", ").concat(p)]};function W(){var e=(0,f.$)().t,t=(0,v.s0)(),n=(0,h.cI)({defaultValues:{action:T.Hx.trade,houseType:T.tU.house,architecture:""}}),i=n.control,d=n.formState.errors,Z=n.register,C=n.handleSubmit,P=n.watch,I=(0,F.s)().socket,W=(0,x.useState)(!1),z=(0,s.Z)(W,2),J=z[0],R=z[1],V=(0,x.useState)(!1),K=(0,s.Z)(V,2),Q=K[0],Y=K[1],G=(0,x.useState)(!1),X=(0,s.Z)(G,2),$=X[0],B=X[1],ee=(0,x.useState)(""),te=(0,s.Z)(ee,2),ne=te[0],ae=te[1],re=(0,x.useState)(null),ce=(0,s.Z)(re,2),se=ce[0],le=ce[1],ie=(0,x.useState)(""),oe=(0,s.Z)(ie,2),ue=oe[0],de=oe[1],pe=(0,x.useState)([]),me=(0,s.Z)(pe,2),xe=me[0],he=me[1],fe=(0,x.useState)(null),ge=(0,s.Z)(fe,2),ve=ge[0],we=ge[1],be=P("action"),_e=P("houseType"),je=_e===T.tU.apartment?"".concat(e("eg"),": ").concat(e("apartment_structure_placeholder")):_e===T.tU.land?"".concat(e("eg"),": ").concat(e("land_structure_placeholder")):"".concat(e("eg"),": ").concat(e("structure_placeholder")),Ne=(0,x.useMemo)((function(){return be===T.Hx.trade?"billion":"million"}),[be]),Ze=+be===T.Hx.rent?S.Wm:S.Wm.filter((function(e){return e.value!==T.tU.office})),ye=be===T.Hx.trade;function ke(e){return Se.apply(this,arguments)}function Se(){return(Se=(0,c.Z)((0,r.Z)().mark((function e(t){var n,c,l,i,o,d,p,m,x,h,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.length=+String(t.length).replaceAll(",","."),t.width=+String(t.width).replaceAll(",","."),n=O(t),c=(0,s.Z)(n,2),l=c[0],i=c[1],o=(0,q.lV)(l+"-"+i)+"-"+Date.now().toString(),d=+String(t.price).replaceAll(",","."),p=ye?1e3*d:d,e.next=8,(0,b.Cj)(se);case 8:return m=e.sent,x=m.data,e.next=12,Promise.all(xe.map((function(e){return(0,b.Cj)(e)})));case 12:return h=e.sent,e.next=15,(0,u.ET)((0,u.hJ)(E.db,"properties"),(0,a.Z)((0,a.Z)((0,a.Z)({},t),A(t.address)),{},{price:p,slug:o,published:!1,hideVideo:!1,images:h.map((function(e){return e.data})),paymentImage:x,subject:l,featurePinned:!1,projectPinned:!1,createdAt:u.EK.now().seconds}));case 15:return f=e.sent,e.next=18,fetch(H.baseApiUrl+"/news-submission",{headers:{"Content-Type":"application/json",secret:H.secret},method:"POST",body:JSON.stringify({name:l,link:window.location.origin+"/chothue?slug=".concat(o)})});case 18:if(!ve){e.next=21;break}return e.next=21,(0,b.Pe)(ve,f.id);case 21:return e.abrupt("return",f);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fe=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(n){var a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),e.prev=1,e.next=4,w.Am.promise(ke(n),{pending:"\u0110ang \u0111\u0103ng tin, vui l\xf2ng kh\xf4ng \u0111\xf3ng tab hi\u1ec7n t\u1ea1i",success:"\u0110\u0103ng tin BDS th\xe0nh c\xf4ng",error:k.PU});case 4:a=e.sent,c=a.id,t("/cam-on/".concat(c)),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:return e.prev=11,B(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,9,11,14]])})));return function(t){return e.apply(this,arguments)}}(),Te=function(){var t=(0,c.Z)((0,r.Z)().mark((function t(){var n,c,s,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=(0,u.IO)((0,u.hJ)(E.db,"properties"),(0,u.Xo)("projectPinnedExpiredAt","desc"),(0,u.ar)("published","==",!0),(0,u.ar)("projectPinned","==",!0),(0,u.b9)(D.PROJECT_NEWS_LIMIT)),t.next=4,(0,u.PL)(n);case 4:if((c=t.sent).size!==D.PROJECT_NEWS_LIMIT){t.next=10;break}return s=c.docs[D.PROJECT_NEWS_LIMIT-1],l=(0,a.Z)({id:s.id},s.data()),w.Am.info("".concat(e("news_board_is_full_latest_news_will_expire_at")," ").concat(o()(1e3*l.projectPinnedExpiredAt).format("DD/MM/YYYY HH:mm A"))),t.abrupt("return");case 10:w.Am.info(e("news_board_is_empty_can_post_news_right_away")),Y(!0),t.next=16;break;case 14:t.prev=14,t.t0=t.catch(0);case 16:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}();return(0,x.useEffect)((function(){document.title="\u0110\u0103ng tin"}),[]),(0,x.useEffect)((function(){var e=(0,p.x0)(8);I.emit("init-news-add",e);var t="".concat(window.location.origin,"/upload?sessionId=").concat(e);m.toString(t,(function(e,t){e||ae(t)})),I.on("".concat(e,"-image-uploaded"),function(){var e=(0,c.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new File([t],"payment-image.webp",{type:"image/webp"}),e.next=3,(0,U.vZ)(n);case 3:n.src=e.sent,n.id=Math.floor(1e5*Math.random()).toString(),le(n),de(URL.createObjectURL(n));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),(0,M.jsxs)("div",{className:"my-5 mx-2 md:mx-10 lg:mx-20 xl:mx-32 flex gap-5 md:gap-10 lg:gap-20 xl:gap-32 text-xs sm:text-sm md:text-base",children:[(0,M.jsx)("div",{className:"sticky top-[100px] w-full h-[80vh] mx-auto hidden lg:block",style:{background:"url(".concat(_.E0,") center no-repeat"),backgroundSize:"cover"},children:(0,M.jsx)("div",{className:"absolute bottom-0 left-0 w-full text-white text-xl p-[20px] bg-black bg-opacity-50",children:(0,M.jsx)("p",{className:"text-center",children:e("post_real_estate_news")})})}),(0,M.jsxs)("form",{className:"grid grid-cols-4 w-full place-content-start gap-5",children:[(0,M.jsxs)("div",{className:"col-span-4 xl:col-span-3",children:[J?(0,M.jsx)("div",{className:"col-span-4 mb-5",children:(0,M.jsx)("p",{className:"text-base md:text-xl xl:text-2xl font-medium",children:e("posting_vip_news_will_continuously_display_on_homepage_please_click_check_news_button",{days:30})})}):(0,M.jsx)("h1",{className:"text-base md:text-xl xl:text-2xl font-medium",children:e("fill_in_real_estate_information")}),(0,M.jsxs)("div",{className:"my-2 flex justify-center items-center rounded text-xs md:text-sm",children:[(0,M.jsx)("div",{className:(0,l.Z)("px-3 py-1 bg-gray-200 border-2 border-gray-200 rounded-l cursor-pointer transition-colors",!J&&"!bg-blue-500 text-white"),onClick:function(){return R(!1)},children:e("normal_news_posting")}),(0,M.jsxs)("div",{className:(0,l.Z)("flex items-center gap-1 px-3 py-1 bg-gray-200 border-2 border-gray-200 rounded-r cursor-pointer transition-colors",J&&"!bg-blue-500 text-white"),onClick:function(){return R(!0)},children:[e("vip_news_posting"),(0,M.jsx)(g.dzv,{className:"text-base"})]})]})]}),(0,M.jsx)(j.cw,{className:"col-span-4 xl:col-span-1",htmlFor:"subject",label:e("trade_rent"),error:d.subject,children:(0,M.jsx)("select",(0,a.Z)((0,a.Z)({},Z("action",{required:!0,valueAsNumber:!0})),{},{className:"input",children:S.m3.map((function(t){return(0,M.jsx)("option",{value:t.value,children:e(t.name)},t.value)}))}))}),(0,M.jsx)(j.cw,{className:"col-span-2 xl:col-span-1",htmlFor:"type",label:e("type"),error:d.houseType,children:(0,M.jsx)("select",(0,a.Z)((0,a.Z)({},Z("houseType",{required:!0,valueAsNumber:!0})),{},{className:"input",children:Ze.map((function(t){return(0,M.jsx)("option",{value:t.value,children:e(t.name)},t.value)}))}))}),(0,M.jsx)(j.cw,{className:"col-span-2 xl:col-span-1",htmlFor:"width",label:e("width_m"),error:d.width,children:(0,M.jsx)("input",(0,a.Z)((0,a.Z)({},Z("width",{required:!0,min:0,max:1e4,validate:L.T0})),{},{className:"input",placeholder:e("enter_width"),type:"text",onKeyDown:L.ie,min:0,max:1e4}))}),(0,M.jsx)(j.cw,{className:"col-span-2 xl:col-span-1",htmlFor:"length",label:e("length_m"),error:d.length,children:(0,M.jsx)("input",(0,a.Z)((0,a.Z)({},Z("length",{required:!0,min:0,max:1e4,validate:L.T0})),{},{className:"input",placeholder:e("enter_length"),type:"text",onKeyDown:L.ie,min:0,max:1e4}))}),(0,M.jsx)(j.cw,{className:"col-span-2 xl:col-span-1",htmlFor:"price",label:be===T.Hx.trade?"".concat(e("price")," (").concat(e(Ne)," \u0111\u1ed3ng)"):"".concat(e("price")," (").concat(e("million"),"/").concat(e("month"),")"),error:d.price,children:(0,M.jsx)("input",(0,a.Z)((0,a.Z)({},Z("price",{required:!0,min:0,max:1e4,validate:L.T0})),{},{className:"input",placeholder:"".concat(e("eg"),": ").concat(be===T.Hx.trade?"0,35 (0.35)":"0,5"),type:"text",onKeyDown:L.ie,min:0,max:1e4}))}),(0,M.jsx)(j.cw,{className:"xl:col-span-2 col-span-4",htmlFor:"structure",label:_e===T.tU.apartment?e("floor"):e("structure"),error:d.structure,children:(0,M.jsx)("input",(0,a.Z)((0,a.Z)({},Z("structure",{required:!0})),{},{className:"input",placeholder:je,type:"text"}))}),(0,M.jsx)(j.cw,{className:"xl:col-span-1 col-span-4",htmlFor:"architecture",label:e("architecture"),error:d.architecture,children:(0,M.jsx)("input",(0,a.Z)((0,a.Z)({},Z("architecture")),{},{className:"input",placeholder:_e===T.tU.land?"(".concat(e("leave_empty"),")"):"".concat(e("eg"),": ").concat(e("architecture_placeholder")),type:"text"}))}),(0,M.jsx)(j.cw,{className:"xl:col-span-1 col-span-4",htmlFor:"direction",label:e("direction"),error:d.direction,children:(0,M.jsx)("input",(0,a.Z)((0,a.Z)({},Z("direction",{maxLength:500})),{},{className:"input",placeholder:e("enter_direction"),type:"text"}))}),(0,M.jsx)(j.cw,{className:"col-span-4",htmlFor:"address",label:e("address"),children:(0,M.jsx)(h.Qr,{control:i,name:"address",defaultValue:N.W,rules:{required:!0,validate:function(t){var n,a=Object.entries(t),r=e("pick");return a.forEach((function(t){var a=(0,s.Z)(t,2),c=a[0];if(a[1]);else switch(c){case"ward":return void(n=e("ward"));case"district":return void(n=e("district"));case"province":return void(n=e("province"));case"address":return n=e("address"),void(r=e("enter"))}})),!n||"".concat(e("please")," ").concat(r," ").concat(n)}},render:function(t){var n=t.field,a=n.value,r=n.onChange,c=t.fieldState.error;return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(j.i$,{value:a,onChange:r}),(0,M.jsx)(j.Xq,{label:e("address"),error:c})]})}})}),(0,M.jsx)(j.cw,{className:"col-span-2",htmlFor:"contactName",label:e("contact_name"),error:d.contactName,children:(0,M.jsx)("input",(0,a.Z)((0,a.Z)({},Z("contactName",{required:!0})),{},{className:"input",placeholder:e("contact_name_placeholder"),type:"text"}))}),(0,M.jsx)(j.cw,{className:"col-span-2",htmlFor:"contactNumber",label:e("contact_number"),error:d.contactNumber,children:(0,M.jsx)("input",(0,a.Z)((0,a.Z)({},Z("contactNumber",{required:!0,pattern:/^0/})),{},{className:"input",maxLength:10,placeholder:"0911xxxxxx",onKeyDown:L.EA,type:"text"}))}),(0,M.jsx)(j.cw,{className:"col-span-4",htmlFor:"description",label:e("description"),error:d.description,children:(0,M.jsx)("textarea",(0,a.Z)((0,a.Z)({},Z("description",{required:!0,maxLength:650})),{},{className:"input resize-none",placeholder:"".concat(e("eg"),": ").concat(e("address_placeholder")),rows:5,maxLength:y.aw}))}),(0,M.jsx)(j.cw,{className:"col-span-4",htmlFor:"addressLink",label:e("address_link"),children:(0,M.jsx)("input",(0,a.Z)((0,a.Z)({},Z("addressLink")),{},{className:"input",placeholder:e("enter_address_link"),type:"text"}))}),(0,M.jsx)("div",{className:"col-span-4",children:(0,M.jsx)("label",{htmlFor:"",children:(0,M.jsx)("div",{className:"relative aspect-vid",children:(0,M.jsx)("iframe",{className:"absolute top-0 left-0 w-full h-full",src:"https://www.youtube.com/embed/IJPb7lo6CK4?autoplay=1",title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})})}),(0,M.jsxs)("div",{className:"col-span-4",children:[(0,M.jsx)("h1",{className:"text-base md:text-xl xl:text-2xl font-medium mb-5",children:e("please_proceed_to_payment_in_order_to_post_news")}),!J&&(0,M.jsx)(j.qv,{sessionQR:ne}),J&&!Q&&(0,M.jsx)(M.Fragment,{children:(0,M.jsx)("button",{className:"btn w-full md:w-[259px] mx-auto",type:"button",onClick:Te,children:e("check_news_board")})}),J&&Q&&(0,M.jsx)(j.qv,{isVIP:!0,sessionQR:ne}),(J&&Q||!J)&&!ue&&(0,M.jsx)(j.cw,{className:"col-span-4",htmlFor:"images",label:"",children:(0,M.jsx)(j.Ur,{accepts:U.Gs,limitMb:y.Te,className:"mx-auto w-full md:w-[259px]",placeholder:e("upload_receipt_screenshot"),onChange:function(e){var t=e[0];t?le(t):(le(null),he([]),we(null))}})})]}),(0,M.jsx)("div",{className:"col-span-4",children:(0,M.jsx)("p",{dangerouslySetInnerHTML:{__html:e("upload_the_screenshot_of_the_receipt_then_click_submit_button")}})}),ue&&(0,M.jsx)("div",{className:"col-span-4",children:(0,M.jsxs)("div",{className:"relative mx-auto w-full md:w-[259px]",children:[(0,M.jsx)("img",{className:"w-full rounded",src:ue,alt:""}),(0,M.jsx)(g.oHP,{color:"#000",size:21,className:"absolute select-none rounded-full shadow cursor-pointer bg-white top-1 right-1 p-1",onClick:function(){le(null),de("")}})]})}),!!se&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(j.cw,{className:"col-span-4",htmlFor:"images",label:e("images"),children:(0,M.jsx)(j.Ur,{accepts:U.Gs,multiple:!0,limitMb:y.Te,max:y.Vv,uploaderCls:"mx-auto w-full md:w-[259px]",className:"col-span-4 mx-auto w-full",placeholder:e("upload_or_drag_and_drop_image"),onChange:he})}),(0,M.jsxs)(j.cw,{className:"col-span-4",htmlFor:"video",label:e("video"),children:[(0,M.jsx)("small",{children:e("maximum_file_size_limit_mb_video_length",{size:300})}),(0,M.jsx)(j.Ur,{limitMb:300,accept:"video/*",accepts:U.WZ,className:"col-span-4 mx-auto w-full",placeholder:e("upload_or_drag_and_drop_video"),onChange:function(e){var t;return we(null!==(t=e[0])&&void 0!==t?t:null)}})]})]}),(0,M.jsx)("div",{className:"col-span-4 ",children:(0,M.jsx)("button",{type:"button",disabled:$,onClick:function(){C((function(e){se?Fe(e):w.Am.warn("Vui l\xf2ng t\u1ea3i l\xean \u1ea3nh ch\u1ee5p h\xf3a \u0111\u01a1n \u0111\u1ec3 \u0111\u0103ng b\xe0i")}))()},className:"btn w-full md:w-[259px] mx-auto mt-5",children:$?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(g.Z7b,{className:"animate-spin"}),e("uploading_news")]}):e("submit")})})]})]})}}}]);