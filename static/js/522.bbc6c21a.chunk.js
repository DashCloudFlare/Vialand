"use strict";(self.webpackChunkvialand=self.webpackChunkvialand||[]).push([[522],{9869:function(e,t,n){n.d(t,{Z:function(){return s}});var a=n(4165),r=n(5861),c=n(1172);function s(e,t,n){return i.apply(this,arguments)}function i(){return(i=(0,r.Z)((0,a.Z)().mark((function e(t,n,r){var s,i,l,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={method:t,mode:"cors",headers:{"Content-Type":"application/json",secret:"h6N&d3ZpiUZ@Mx9sjAF0!"}},i=n,r&&("GET"===t?(l=c.stringify(r),i+="?"+l):(s.body=r instanceof FormData?r:JSON.stringify(r),r instanceof FormData&&(s.headers={secret:"h6N&d3ZpiUZ@Mx9sjAF0!"}))),e.next=5,fetch(i,s);case 5:if(!(o=e.sent).ok){e.next=10;break}return e.next=9,o.json();case 9:return e.abrupt("return",e.sent);case 10:return e.abrupt("return",void 0);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1716:function(e,t,n){n.d(t,{Cj:function(){return l},Pe:function(){return o},hF:function(){return u},ws:function(){return s},wt:function(){return i}});var a=n(8941),r=n(9869),c=a.Z.common.baseApiUrl+"/upload",s=function(e){var t=new FormData;return t.append("file",e),(0,r.Z)("POST",c,t)},i=function(e){return(0,r.Z)("DELETE",c,{ids:e})},l=function(e){var t=new FormData;return t.append("file",e),(0,r.Z)("POST",c+"/google-img",t)},o=function(e,t){var n=new FormData;return n.append("file",e),n.append("newsId",t),(0,r.Z)("POST",c+"/google-vid",n)},u=function(e){return(0,r.Z)("DELETE",c+"/google",{ids:e})}},7629:function(e,t,n){n.d(t,{PU:function(){return c},ZE:function(){return r},vh:function(){return a}});var a="\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i sau \xedt ph\xfat",r="\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng li\xean h\u1ec7 qu\u1ea3n tr\u1ecb vi\xean",c="Qu\xe1 tr\xecnh t\u1ea3i l\xean \u0111\xe3 b\u1ecb l\u1ed7i. Qu\xfd kh\xe1ch vui l\xf2ng li\xean h\u1ec7 tr\u1ef1c ti\u1ebfp v\u1edbi s\u1ed1 Hotline 0868113025 (ho\u1eb7c Zalo) \u0111\u1ec3 \u0111\u01b0\u1ee3c x\u1eed l\xfd k\u1ecbp th\u1eddi"},9522:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var a=n(1413),r=n(4165),c=n(5861),s=n(9439),i=n(3061),l=n(658),o=n.n(l),u=n(573),d=n(9548),p=n(2751),m=n(6316),x=n(7313),h=n(5627),f=n(4511),g=n(7864),w=n(8512),v=n(1716),b=n(7265),_=n(753),j=n(8298),N=n(8941),Z=n(6404),y=n(7629),k=n(200),F=n(5831),S=n(887),T=n(6243),C=n(5993),E=n(699),P=n(3027),A=function(e){var t=e.province,n=e.ward,r=e.district,c=E.find((function(e){return parseInt(e.id,10)===t})),s=P.find((function(e){return parseInt(e.id,10)===r})),i=C.find((function(e){return parseInt(e.id,10)===n})),l="".concat(s.typeName," ").concat(s.name.startsWith("Qu\u1eadn")?s.name.substring(5):s.name);return(0,a.Z)((0,a.Z)({},e),{},{provinceName:"".concat(c.typeName," ").concat(null===c||void 0===c?void 0:c.name),districtName:l,wardName:null===i||void 0===i?void 0:i.name})},I=n(8469),L=n(2440),U=n(4885),D=n(5629),q=n(6417),M=N.Z.common,O=function(e){var t=e.action,n=e.houseType,a=e.width,r=e.length,c=e.address,s=a*r;s=Number.isInteger(s)?s:s.toFixed(2);var i=A(c),l=i.address,o=i.wardName,u=i.districtName,p=i.provinceName;return["".concat((0,d.t)(k.m3.find((function(e){return e.value===t})).name)," ").concat((0,d.t)(k.Wm.find((function(e){return e.value===n})).name)," ").concat(s,"m\xb2 (").concat(a," x ").concat(r,"m)"),"".concat(l,", ").concat(o,", ").concat(u,", ").concat(p)]};function H(){var e=(0,f.$)().t,t=(0,h.cI)({defaultValues:{action:S.Hx.trade,houseType:S.tU.house,architecture:""}}),n=t.control,l=t.formState.errors,d=t.register,N=t.handleSubmit,C=t.watch,E=(0,F.s)().socket,P=(0,x.useState)(!1),H=(0,s.Z)(P,2),W=H[0],J=H[1],V=(0,x.useState)(!1),z=(0,s.Z)(V,2),R=z[0],K=z[1],Q=(0,x.useState)(!1),Y=(0,s.Z)(Q,2),G=Y[0],X=Y[1],$=(0,x.useState)(""),B=(0,s.Z)($,2),ee=B[0],te=B[1],ne=(0,x.useState)(null),ae=(0,s.Z)(ne,2),re=ae[0],ce=ae[1],se=(0,x.useState)(""),ie=(0,s.Z)(se,2),le=ie[0],oe=ie[1],ue=(0,x.useState)([]),de=(0,s.Z)(ue,2),pe=de[0],me=de[1],xe=(0,x.useState)(null),he=(0,s.Z)(xe,2),fe=he[0],ge=he[1],we=C("action"),ve=C("houseType"),be=ve===S.tU.apartment?"".concat(e("eg"),": T\u1ea7ng 1"):ve===S.tU.land?"".concat(e("eg"),": \u0110\u1ea5t \u1edf t\u1ea1i n\xf4ng th\xf4n"):"".concat(e("eg"),": Tr\u1ec7t 01 L\u1eedng 01 L\u1ea7u"),_e=(0,x.useMemo)((function(){return we===S.Hx.trade?"billion":"million"}),[we]),je=+we===S.Hx.rent?k.Wm:k.Wm.filter((function(e){return e.value!==S.tU.office})),Ne=we===S.Hx.trade;function Ze(e){return ye.apply(this,arguments)}function ye(){return(ye=(0,c.Z)((0,r.Z)().mark((function e(t){var n,c,i,l,o,d,p,m,x,h,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.length=+String(t.length).replaceAll(",","."),t.width=+String(t.width).replaceAll(",","."),n=O(t),c=(0,s.Z)(n,2),i=c[0],l=c[1],o=(0,U.lV)(i+"-"+l)+"-"+Date.now().toString(),d=+String(t.price).replaceAll(",","."),p=Ne?1e3*d:d,e.next=8,(0,v.Cj)(re);case 8:return m=e.sent,x=m.data,e.next=12,Promise.all(pe.map((function(e){return(0,v.Cj)(e)})));case 12:return h=e.sent,e.next=15,(0,u.ET)((0,u.hJ)(T.db,"properties"),(0,a.Z)((0,a.Z)((0,a.Z)({},t),A(t.address)),{},{price:p,slug:o,published:!1,hideVideo:!1,images:h.map((function(e){return e.data})),paymentImage:x,subject:i,featurePinned:!1,projectPinned:!1,createdAt:u.EK.now().seconds}));case 15:return f=e.sent,e.next=18,fetch(M.baseApiUrl+"/news-submission",{headers:{"Content-Type":"application/json",secret:M.secret},method:"POST",body:JSON.stringify({name:i,link:window.location.origin+"/chothue?slug=".concat(o)})});case 18:if(!fe){e.next=21;break}return e.next=21,(0,v.Pe)(fe,f.id);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ke=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X(!0),e.prev=1,e.next=4,w.Am.promise(Ze(t),{pending:"\u0110ang \u0111\u0103ng tin, vui l\xf2ng kh\xf4ng \u0111\xf3ng tab hi\u1ec7n t\u1ea1i",success:"\u0110\u0103ng tin BDS th\xe0nh c\xf4ng",error:y.PU});case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return e.prev=8,"undefined"!==typeof window&&"location"in window&&window.location.reload(),X(!1),e.finish(8);case 12:case"end":return e.stop()}}),e,null,[[1,6,8,12]])})));return function(t){return e.apply(this,arguments)}}(),Fe=function(){var t=(0,c.Z)((0,r.Z)().mark((function t(){var n,c,s,i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=(0,u.IO)((0,u.hJ)(T.db,"properties"),(0,u.Xo)("projectPinnedExpiredAt","desc"),(0,u.ar)("published","==",!0),(0,u.ar)("projectPinned","==",!0),(0,u.b9)(D.PROJECT_NEWS_LIMIT)),t.next=4,(0,u.PL)(n);case 4:if((c=t.sent).size!==D.PROJECT_NEWS_LIMIT){t.next=10;break}return s=c.docs[D.PROJECT_NEWS_LIMIT-1],i=(0,a.Z)({id:s.id},s.data()),w.Am.info("".concat(e("news_board_is_full_latest_news_will_expire_at")," ").concat(o()(1e3*i.projectPinnedExpiredAt).format("DD/MM/YYYY HH:mm A"))),t.abrupt("return");case 10:w.Am.info(e("news_board_is_empty_can_post_news_right_away")),K(!0),t.next=16;break;case 14:t.prev=14,t.t0=t.catch(0);case 16:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}();return(0,x.useEffect)((function(){document.title="\u0110\u0103ng tin"}),[]),(0,x.useEffect)((function(){var e=(0,p.x0)(8);E.emit("init-news-add",e);var t="".concat(window.location.origin,"/upload?sessionId=").concat(e);m.toString(t,(function(e,t){e||te(t)})),E.on("".concat(e,"-image-uploaded"),function(){var e=(0,c.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new File([t],"payment-image.webp",{type:"image/webp"}),e.next=3,(0,L.vZ)(n);case 3:n.src=e.sent,n.id=Math.floor(1e5*Math.random()).toString(),ce(n),oe(URL.createObjectURL(n));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),(0,q.jsxs)("div",{className:"my-5 mx-2 md:mx-10 lg:mx-20 xl:mx-32 flex gap-5 md:gap-10 lg:gap-20 xl:gap-32 text-xs sm:text-sm md:text-base",children:[(0,q.jsx)("div",{className:"sticky top-[100px] w-full h-[80vh] mx-auto hidden lg:block",style:{background:"url(".concat(b.E0,") center no-repeat"),backgroundSize:"cover"},children:(0,q.jsx)("div",{className:"absolute bottom-0 left-0 w-full text-white text-xl p-[20px] bg-black bg-opacity-50",children:(0,q.jsx)("p",{className:"text-center",children:e("post_real_estate_news")})})}),(0,q.jsxs)("form",{className:"grid grid-cols-4 w-full place-content-start gap-5",children:[(0,q.jsxs)("div",{className:"col-span-4 xl:col-span-3",children:[W?(0,q.jsx)("div",{className:"col-span-4 mb-5",children:(0,q.jsx)("p",{className:"text-base md:text-xl xl:text-2xl font-medium",children:e("posting_vip_news_will_continuously_display_on_homepage_please_click_check_news_button",{days:30})})}):(0,q.jsx)("h1",{className:"text-base md:text-xl xl:text-2xl font-medium",children:e("fill_in_real_estate_information")}),(0,q.jsxs)("div",{className:"my-2 flex justify-center items-center rounded text-xs md:text-sm",children:[(0,q.jsx)("div",{className:(0,i.Z)("px-3 py-1 bg-gray-200 border-2 border-gray-200 rounded-l cursor-pointer transition-colors",!W&&"!bg-blue-500 text-white"),onClick:function(){return J(!1)},children:e("normal_news_posting")}),(0,q.jsxs)("div",{className:(0,i.Z)("flex items-center gap-1 px-3 py-1 bg-gray-200 border-2 border-gray-200 rounded-r cursor-pointer transition-colors",W&&"!bg-blue-500 text-white"),onClick:function(){return J(!0)},children:[e("vip_news_posting"),(0,q.jsx)(g.dzv,{className:"text-base"})]})]})]}),(0,q.jsx)(_.cw,{className:"col-span-4 xl:col-span-1",htmlFor:"subject",label:e("trade_rent"),error:l.subject,children:(0,q.jsx)("select",(0,a.Z)((0,a.Z)({},d("action",{required:!0,valueAsNumber:!0})),{},{className:"input",children:k.m3.map((function(t){return(0,q.jsx)("option",{value:t.value,children:e(t.name)},t.value)}))}))}),(0,q.jsx)(_.cw,{className:"col-span-2 xl:col-span-1",htmlFor:"type",label:e("type"),error:l.houseType,children:(0,q.jsx)("select",(0,a.Z)((0,a.Z)({},d("houseType",{required:!0,valueAsNumber:!0})),{},{className:"input",children:je.map((function(t){return(0,q.jsx)("option",{value:t.value,children:e(t.name)},t.value)}))}))}),(0,q.jsx)(_.cw,{className:"col-span-2 xl:col-span-1",htmlFor:"width",label:e("width_m"),error:l.width,children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},d("width",{required:!0,min:0,max:1e4,validate:I.T0})),{},{className:"input",placeholder:e("enter_width"),type:"text",onKeyDown:I.ie,min:0,max:1e4}))}),(0,q.jsx)(_.cw,{className:"col-span-2 xl:col-span-1",htmlFor:"length",label:e("length_m"),error:l.length,children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},d("length",{required:!0,min:0,max:1e4,validate:I.T0})),{},{className:"input",placeholder:e("enter_length"),type:"text",onKeyDown:I.ie,min:0,max:1e4}))}),(0,q.jsx)(_.cw,{className:"col-span-2 xl:col-span-1",htmlFor:"price",label:we===S.Hx.trade?"".concat(e("price")," (").concat(e(_e)," \u0111\u1ed3ng)"):"".concat(e("price")," (").concat(e("million"),"/").concat(e("month"),")"),error:l.price,children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},d("price",{required:!0,min:0,max:1e4,validate:I.T0})),{},{className:"input",placeholder:"".concat(e("eg"),": ").concat(we===S.Hx.trade?"0,35 (0.35)":"0,5"),type:"text",onKeyDown:I.ie,min:0,max:1e4}))}),(0,q.jsx)(_.cw,{className:"xl:col-span-2 col-span-4",htmlFor:"structure",label:ve===S.tU.apartment?e("floor"):e("structure"),error:l.structure,children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},d("structure",{required:!0})),{},{className:"input",placeholder:be,type:"text"}))}),(0,q.jsx)(_.cw,{className:"xl:col-span-1 col-span-4",htmlFor:"architecture",label:e("architecture"),error:l.architecture,children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},d("architecture")),{},{className:"input",placeholder:ve===S.tU.land?"(".concat(e("leave_empty"),")"):"".concat(e("eg"),": 2PN 1WC"),type:"text"}))}),(0,q.jsx)(_.cw,{className:"xl:col-span-1 col-span-4",htmlFor:"direction",label:e("direction"),error:l.direction,children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},d("direction",{maxLength:500})),{},{className:"input",placeholder:e("enter_direction"),type:"text"}))}),(0,q.jsx)(_.cw,{className:"col-span-4",htmlFor:"address",label:e("address"),children:(0,q.jsx)(h.Qr,{control:n,name:"address",defaultValue:j.W,rules:{required:!0,validate:function(t){var n,a=Object.entries(t),r=e("pick");return a.forEach((function(t){var a=(0,s.Z)(t,2),c=a[0];if(a[1]);else switch(c){case"ward":return void(n=e("ward"));case"district":return void(n=e("district"));case"province":return void(n=e("province"));case"address":return n=e("address"),void(r=e("enter"))}})),!n||"".concat(e("please")," ").concat(r," ").concat(n)}},render:function(t){var n=t.field,a=n.value,r=n.onChange,c=t.fieldState.error;return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(_.i$,{value:a,onChange:r}),(0,q.jsx)(_.Xq,{label:e("address"),error:c})]})}})}),(0,q.jsx)(_.cw,{className:"col-span-2",htmlFor:"contactName",label:e("contact_name"),error:l.contactName,children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},d("contactName",{required:!0})),{},{className:"input",placeholder:"Nguy\u1ec5n V\u0103n A",type:"text"}))}),(0,q.jsx)(_.cw,{className:"col-span-2",htmlFor:"contactNumber",label:e("contact_number"),error:l.contactNumber,children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},d("contactNumber",{required:!0,pattern:/^0/})),{},{className:"input",maxLength:10,placeholder:"0911xxxxxx",onKeyDown:I.EA,type:"text"}))}),(0,q.jsx)(_.cw,{className:"col-span-4",htmlFor:"description",label:e("description"),error:l.description,children:(0,q.jsx)("textarea",(0,a.Z)((0,a.Z)({},d("description",{required:!0,maxLength:650})),{},{className:"input resize-none",placeholder:"".concat(e("eg"),": G\u1ea7n ch\u1ee3, tr\u01b0\u1eddng h\u1ecdc..."),rows:5,maxLength:Z.aw}))}),(0,q.jsx)(_.cw,{className:"col-span-4",htmlFor:"addressLink",label:e("address_link"),children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},d("addressLink")),{},{className:"input",placeholder:e("enter_address_link"),type:"text"}))}),(0,q.jsx)("div",{className:"col-span-4",children:(0,q.jsx)("label",{htmlFor:"",children:(0,q.jsx)("div",{className:"relative aspect-vid",children:(0,q.jsx)("iframe",{className:"absolute top-0 left-0 w-full h-full",src:"https://www.youtube.com/embed/IJPb7lo6CK4?autoplay=1",title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})})}),(0,q.jsxs)("div",{className:"col-span-4",children:[(0,q.jsx)("h1",{className:"text-base md:text-xl xl:text-2xl font-medium mb-5",children:e("please_proceed_to_payment_in_order_to_post_news")}),!W&&(0,q.jsx)(_.qv,{sessionQR:ee}),W&&!R&&(0,q.jsx)(q.Fragment,{children:(0,q.jsx)("button",{className:"btn w-full md:w-[259px] mx-auto",type:"button",onClick:Fe,children:e("check_news_board")})}),W&&R&&(0,q.jsx)(_.qv,{isVIP:!0,sessionQR:ee}),(W&&R||!W)&&!le&&(0,q.jsx)(_.cw,{className:"col-span-4",htmlFor:"images",label:"",children:(0,q.jsx)(_.Ur,{accepts:L.Gs,limitMb:Z.Te,className:"mx-auto w-full md:w-[259px]",placeholder:e("upload_receipt_screenshot"),onChange:function(e){var t=e[0];t?ce(t):(ce(null),me([]),ge(null))}})})]}),(0,q.jsx)("div",{className:"col-span-4",children:(0,q.jsx)("p",{dangerouslySetInnerHTML:{__html:e("upload_the_screenshot_of_the_receipt_then_click_submit_button")}})}),le&&(0,q.jsx)("div",{className:"col-span-4",children:(0,q.jsxs)("div",{className:"relative mx-auto w-full md:w-[259px]",children:[(0,q.jsx)("img",{className:"w-full rounded",src:le,alt:""}),(0,q.jsx)(g.oHP,{color:"#000",size:21,className:"absolute select-none rounded-full shadow cursor-pointer bg-white top-1 right-1 p-1",onClick:function(){ce(null),oe("")}})]})}),!!re&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(_.cw,{className:"col-span-4",htmlFor:"images",label:e("images"),children:(0,q.jsx)(_.Ur,{accepts:L.Gs,multiple:!0,limitMb:Z.Te,max:Z.Vv,uploaderCls:"mx-auto w-full md:w-[259px]",className:"col-span-4 mx-auto w-full",placeholder:e("upload_or_drag_and_drop_image"),onChange:me})}),(0,q.jsxs)(_.cw,{className:"col-span-4",htmlFor:"video",label:e("video"),children:[(0,q.jsx)("small",{children:e("maximum_file_size_limit_mb_video_length",{size:300})}),(0,q.jsx)(_.Ur,{limitMb:300,accept:"video/*",accepts:L.WZ,className:"col-span-4 mx-auto w-full",placeholder:e("upload_or_drag_and_drop_video"),onChange:function(e){var t;return ge(null!==(t=e[0])&&void 0!==t?t:null)}})]})]}),(0,q.jsx)("div",{className:"col-span-4 ",children:(0,q.jsx)("button",{type:"button",disabled:G,onClick:function(){N((function(e){re?ke(e):w.Am.warn("Vui l\xf2ng t\u1ea3i l\xean \u1ea3nh ch\u1ee5p h\xf3a \u0111\u01a1n \u0111\u1ec3 \u0111\u0103ng b\xe0i")}))()},className:"btn w-full md:w-[259px] mx-auto mt-5",children:G?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(g.Z7b,{className:"animate-spin"}),e("uploading_news")]}):e("submit")})})]})]})}}}]);