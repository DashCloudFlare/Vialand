"use strict";(self.webpackChunkvialand=self.webpackChunkvialand||[]).push([[327],{887:function(e,t,r){var n,a,u;r.d(t,{Hx:function(){return u},tU:function(){return a}}),function(e){e[e.east=1]="east",e[e.west=2]="west",e[e.south=3]="south",e[e.north=4]="north",e[e.northEast=5]="northEast",e[e.northSouth=6]="northSouth",e[e.southEase=7]="southEase",e[e.southWest=8]="southWest"}(n||(n={})),function(e){e[e.house=1]="house",e[e.land=2]="land",e[e.apartment=3]="apartment",e[e.villa=4]="villa",e[e.resort=5]="resort",e[e.factory=6]="factory",e[e.plan=7]="plan",e[e.bedsit=8]="bedsit"}(a||(a={})),function(e){e[e.trade=1]="trade",e[e.rent=2]="rent"}(u||(u={}))},6791:function(e,t,r){r.d(t,{r:function(){return s}});var n=r(4165),a=r(5861),u=r(9439),c=r(7313),i=r(9225);function s(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=(0,c.useState)("idle"),s=(0,u.Z)(r,2),o=s[0],f=s[1],l=(0,c.useState)(null),d=(0,u.Z)(l,2),p=d[0],h=d[1],v=(0,c.useState)(null),g=(0,u.Z)(v,2),m=g[0],x=g[1],Z="pending"===o,b="error"===o,w=function(){var t=(0,a.Z)((0,n.Z)().mark((function t(r){var a;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f("pending"),h(null),x(null),t.prev=3,t.next=6,e();case 6:a=t.sent,r&&(h(a),f("success")),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),r&&(f("error"),x(t.t0));case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}();return(0,i.u)((function(e){t&&w(e())}),[t]),(0,c.useEffect)((function(){return function(){f("idle"),h(null),x(null)}}),[]),{isLoading:Z,isError:b,status:o,data:p,error:m,execute:function(){return w(!0)}}}},9225:function(e,t,r){r.d(t,{u:function(){return a}});var n=r(7313);function a(e,t){var r=(0,n.useRef)(e);r.current=e;var a=(0,n.useRef)(!1);(0,n.useEffect)((function(){return a.current=!0,r.current((function(){return a.current})),function(){a.current=!1}}),t)}},8468:function(e,t,r){r.d(t,{K:function(){return c}});var n=r(7313),a=r(7890),u=r(1172);function c(){var e=(0,a.TH)(),t=e.pathname,r=e.search,c=(0,a.s0)();return[(0,n.useMemo)((function(){return u.parse(r)}),[r]),(0,n.useCallback)((function(e){c(t+"?"+u.stringify(e,{skipEmptyString:!0,skipNull:!0}),{replace:!0})}),[t,c])]}},6243:function(e,t,r){r.d(t,{db:function(){return h}});var n=r(271),a=r(4457),u=r(6797),c=r(8941).Z.firebase,i=c.apiKey,s=c.appId,o=c.databaseURL,f=c.projectId,l=c.storageBucket,d={apiKey:i,authDomain:c.authDomain,databaseURL:o,projectId:f,storageBucket:l,messagingSenderId:c.messagingSenderId,appId:s},p=(0,n.ZF)(d),h=(0,a.ad)(p);(0,u.cF)(p)},8327:function(e,t,r){r.r(t),r.d(t,{default:function(){return S}});var n=r(1413),a=r(9439),u=r(7864),c=r(7313),i=r(4511),s=r(7890),o=r(8471),f=r(8468),l=r(4165),d=r(3433),p=r(5861),h=r(4925),v=r(4457),g=r(6791),m=r(6243),x=r(887);function Z(e){var t=e.ref,r=e.offset,n=void 0===r?50:r,a=e.loading,u=e.fetchFn,i=e.canLoadMore;(0,c.useEffect)((function(){if(t.current){var e=function(e){var t=e.target,r=t.getBoundingClientRect().height;t.scrollTop+r>=t.scrollHeight-n&&i&&!a&&(null===u||void 0===u||u())};return t.current.addEventListener("scroll",e),function(){var r;null===(r=t.current)||void 0===r||r.removeEventListener("scroll",e)}}}))}var b=["execute"],w=function(e){if(!e)return[];switch(e){case"under_1":return[(0,v.ar)("price","<=",1e3)];case"1_2":return[(0,v.ar)("price",">=",1e3),(0,v.ar)("price","<=",2e3)];case"2_3":return[(0,v.ar)("price",">=",2e3),(0,v.ar)("price","<=",3e3)];case"3_5":return[(0,v.ar)("price",">=",3e3),(0,v.ar)("price","<=",5e3)];case"5_8":return[(0,v.ar)("price",">=",5e3),(0,v.ar)("price","<=",8e3)];case"8_15":return[(0,v.ar)("price",">=",8e3),(0,v.ar)("price","<=",15e3)];case"15_30":return[(0,v.ar)("price",">=",15e3),(0,v.ar)("price","<=",3e4)];case"upper_30":return[(0,v.ar)("price",">=",3e4)]}};var E=r(6417);function S(){var e=(0,i.$)().t,t=(0,s.TH)().pathname,r=(0,f.K)(),S=(0,a.Z)(r,2),k=S[0],y=S[1],R=(0,c.useRef)(null),j=function(e,t){var r=(0,s.TH)().pathname,u=(0,c.useState)(!0),i=(0,a.Z)(u,2),o=i[0],f=i[1],E=(0,c.useState)(void 0),S=(0,a.Z)(E,2),k=S[0],y=S[1],R=(0,c.useState)([]),j=(0,a.Z)(R,2),I=j[0],L=j[1],C=(0,g.r)((function(){return W.apply(this,arguments)}),!1),_=C.execute,H=(0,h.Z)(C,b),F=(0,c.useState)(!0),K=(0,a.Z)(F,2),N=K[0],T=K[1];Z({ref:e,canLoadMore:N,loading:H.isLoading,fetchFn:_});var M=r.startsWith("/mua-ban")?x.Hx.trade:x.Hx.rent;function W(){return(W=(0,p.Z)((0,l.Z)().mark((function e(){var r,n,a,u,c;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=[],t.ward&&r.push((0,v.ar)("ward","==",parseInt(t.ward.toString(),10))),t.district&&r.push((0,v.ar)("district","==",parseInt(t.district.toString(),10))),t.province&&r.push((0,v.ar)("province","==",parseInt(t.province.toString(),10))),k&&r.push((0,v.TQ)(k)),t.priceRange?r.unshift((0,v.Xo)("price","desc")):r.unshift((0,v.Xo)("createdAt","desc")),n=v.IO.apply(void 0,[(0,v.hJ)(m.db,"properties")].concat(r,[(0,v.ar)("published","==",!0),(0,v.ar)("action","==",M)],(0,d.Z)(w(t.priceRange)),[(0,v.b9)(10)])),a=[],e.next=11,(0,v.PL)(n);case 11:return u=e.sent,c=u.docs[u.docs.length-1],T(!!c),y(c),u.forEach((function(e){a.push(e.data())})),f(!1),L((function(e){return[].concat((0,d.Z)(e),a)})),e.abrupt("return",a);case 21:e.prev=21,e.t0=e.catch(0),console.log(e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})))).apply(this,arguments)}var B=(0,c.useCallback)((function(){f(!0)}),[]),U=(0,c.useCallback)((function(){f(!0),y(void 0),L([])}),[]);return(0,c.useEffect)((function(){o&&_()}),[o]),(0,c.useEffect)((function(){return function(){L([]),y(void 0),T(!0),f(!0)}}),[r]),(0,c.useEffect)((function(){U()}),[t.priceRange,t.district,t.province,t.ward,U]),(0,c.useEffect)((function(){return function(){}}),[r]),(0,n.Z)((0,n.Z)({},H),{},{data:I,refetch:B,clear:U})}(R,k),I=j.isLoading,L=j.data,C=j.clear;(0,c.useEffect)((function(){document.title=t.startsWith("/mua-ban")?"Mua b\xe1n":"Cho thu\xea"}),[t]);var _=k.province,H=k.district,F=k.ward,K=k.priceRange;return(0,E.jsxs)("div",{className:"p-5 flex items-center flex-col",children:[(0,E.jsx)(o.wn,{value:{province:_,district:H,ward:F,priceRange:K},onFilter:function(e){y((0,n.Z)((0,n.Z)({},k),e))},onClear:function(){y({}),C()}}),!I&&!(null!==L&&void 0!==L&&L.length)&&(0,E.jsx)(o.x4,{title:"Kh\xf4ng c\xf3 th\xf4ng tin"}),(0,E.jsxs)("div",{className:"max-w-[1000px] w-full max-h-[55vh] md:max-h-[60vh] overflow-y-auto",ref:R,children:[null===L||void 0===L?void 0:L.map((function(e){return(0,E.jsx)(o.eu,{data:e},e.id)})),I&&(0,E.jsx)(o.x4,{title:(0,E.jsxs)("div",{className:"flex items-center gap-2",children:[(0,E.jsx)(u.Z7b,{className:"animate-spin"})," ",e("searching")]})})]})]})}}}]);