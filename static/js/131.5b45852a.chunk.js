"use strict";(self.webpackChunkvialand=self.webpackChunkvialand||[]).push([[131],{5905:function(n,e,t){t.d(e,{iy:function(){return u},$m:function(){return c}});var r=t(9869),a="https://mail.vialand.vn",c=function(){return(0,r.Z)("GET",a+"/renew")},u=function(){return(0,r.Z)("POST",a+"/notification")}},9869:function(n,e,t){t.d(e,{Z:function(){return u}});var r=t(4165),a=t(5861),c=t(1172);function u(n,e,t){return i.apply(this,arguments)}function i(){return(i=(0,a.Z)((0,r.Z)().mark((function n(e,t,a){var u,i,s,o;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u={method:e,mode:"cors",headers:{"Content-Type":"application/json",secret:"h6N&d3ZpiUZ@Mx9sjAF0!"}},i=t,a&&("GET"===e?(s=c.stringify(a),i+="?"+s):(u.body=a instanceof FormData?a:JSON.stringify(a),a instanceof FormData&&(u.headers={secret:"h6N&d3ZpiUZ@Mx9sjAF0!"}))),n.next=5,fetch(i,u);case 5:if(!(o=n.sent).ok){n.next=10;break}return n.next=9,o.json();case 9:return n.abrupt("return",n.sent);case 10:return n.abrupt("return",void 0);case 11:case"end":return n.stop()}}),n)})))).apply(this,arguments)}},7629:function(n,e,t){t.d(e,{v:function(){return r}});var r="\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i sau \xedt ph\xfat"},6791:function(n,e,t){t.d(e,{r:function(){return s}});var r=t(4165),a=t(5861),c=t(9439),u=t(7313),i=t(9225);function s(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=(0,u.useState)("idle"),s=(0,c.Z)(t,2),o=s[0],l=s[1],d=(0,u.useState)(null),f=(0,c.Z)(d,2),h=f[0],p=f[1],v=(0,u.useState)(null),x=(0,c.Z)(v,2),m=x[0],b=x[1],g="pending"===o,j="error"===o,k=(0,u.useCallback)(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l("pending"),p(null),b(null),e.prev=3,e.next=6,n();case 6:return a=e.sent,t&&(p(a),l("success")),e.abrupt("return",a);case 11:e.prev=11,e.t0=e.catch(3),t&&(l("error"),b(e.t0));case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(n){return e.apply(this,arguments)}}(),[n]);return(0,i.u)((function(n){e&&k(n())}),[e]),(0,u.useEffect)((function(){return function(){l("idle"),p(null),b(null)}}),[]),{isLoading:g,isError:j,status:o,data:h,error:m,execute:function(){return k(!0)}}}},9225:function(n,e,t){t.d(e,{u:function(){return a}});var r=t(7313);function a(n,e){var t=(0,r.useRef)(n);t.current=n;var a=(0,r.useRef)(!1);(0,r.useEffect)((function(){return a.current=!0,t.current((function(){return a.current})),function(){a.current=!1}}),e)}},8468:function(n,e,t){t.d(e,{K:function(){return u}});var r=t(7313),a=t(7890),c=t(1172);function u(){var n=(0,a.TH)(),e=n.pathname,t=n.search,u=(0,a.s0)();return[(0,r.useMemo)((function(){return c.parse(t)}),[t]),(0,r.useCallback)((function(n){u(e+"?"+c.stringify(n,{skipEmptyString:!0,skipNull:!0}),{replace:!0})}),[e,u])]}},6243:function(n,e,t){t.d(e,{db:function(){return p}});var r=t(271),a=t(4457),c=t(6797),u=t(8941).Z.firebase,i=u.apiKey,s=u.appId,o=u.databaseURL,l=u.projectId,d=u.storageBucket,f={apiKey:i,authDomain:u.authDomain,databaseURL:o,projectId:l,storageBucket:d,messagingSenderId:u.messagingSenderId,appId:s},h=(0,r.ZF)(f),p=(0,a.ad)(h);(0,c.cF)(h)},3278:function(n,e,t){t.d(e,{Fp:function(){return a},Qm:function(){return r},yC:function(){return c}});var r=function(n,e){return Promise.all(n.map((function(n){return fetch("https://www.googleapis.com/drive/v2/files/".concat(n.id,"?fields=thumbnailLink,embedLink,id"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}})}))).then((function(n){return Promise.all(n.map((function(n){return n.json()}))).then((function(n){return n.map((function(n){return{id:n.id,thumbnailLink:n.thumbnailLink,embedLink:n.embedLink,webViewLink:n.webViewLink}}))}))})).catch()},a=function(n,e){return fetch("https://www.googleapis.com/drive/v3/files/".concat(n),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}}).then((function(){return!0})).catch((function(){return!1}))},c=function(n,e){var t=[];return["video","images","paymentImage"].forEach((function(r){var c=n[r];c&&(Array.isArray(c)?c.forEach((function(n){return t.push(a(n.id,e))})):Object.keys(c).length&&null!==c&&void 0!==c&&c.id&&t.push(a(null===c||void 0===c?void 0:c.id,e)))})),t}},4131:function(n,e,t){t.r(e),t.d(e,{default:function(){return T}});var r=t(4165),a=t(1413),c=t(3433),u=t(5861),i=t(9439),s=t(658),o=t.n(s),l=t(4457),d=t(7313),f=t(7864),h=t(2539),p=t(7890),v=t(8512),x=t(3061),m=t(5905),b=t(5218),g=t(7629),j=t(5857),k=t(8468),Z=t(6243),w=t(3278),y=t(4925),N=t(6791),C=t(9225),E=["execute"];var L=t(6417);function T(){var n=(0,p.s0)(),e=(0,j.Eu)(),t=e.token,s=e.onLogout,T=(0,k.K)(),I=(0,i.Z)(T,2),D=I[0],S=I[1],A=function(n){var e=n.slug,t=(0,d.useState)(void 0),c=(0,i.Z)(t,2),s=c[0],o=c[1],f=(0,d.useState)(!1),h=(0,i.Z)(f,2),p=h[0],v=h[1],x=(0,N.r)((function(){return g.apply(this,arguments)}),!1),m=x.execute,b=(0,y.Z)(x,E);function g(){return(g=(0,u.Z)((0,r.Z)().mark((function n(){var t,c,u,i;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=[],e&&t.push((0,l.ar)("slug","==",e)),s&&!e&&t.push((0,l.TQ)(s)),c=l.IO.apply(void 0,[(0,l.hJ)(Z.db,"properties"),(0,l.Xo)("createdAt","desc")].concat(t,[(0,l.b9)(20)])),u=[],n.next=7,(0,l.PL)(c);case 7:return i=n.sent,o(i.docs[i.docs.length-1]),i.forEach((function(n){u.push((0,a.Z)({id:n.id},n.data()))})),n.abrupt("return",u);case 11:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var j=(0,d.useCallback)((function(){v(!1)}),[]),k=(0,d.useCallback)((function(){o(void 0),v(!1)}),[]);return(0,C.u)((function(n){!p&&n()&&(m(),v(!0))}),[p]),(0,a.Z)((0,a.Z)({},b),{},{refetch:j,clear:k})}({slug:D.slug}),F=A.isLoading,P=A.data,R=A.refetch,U=A.clear,V=(0,d.useState)([]),J=(0,i.Z)(V,2),O=J[0],B=J[1];(0,d.useEffect)((function(){B(null!==P&&void 0!==P?P:[])}),[P]);var K=(0,d.useRef)(null),M=(0,d.useCallback)(function(){var n=(0,u.Z)((0,r.Z)().mark((function n(e,t){var u,i,s;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(u=(0,c.Z)(O),!((i=u.findIndex((function(n){return n.id===e})))>-1)){n.next=18;break}return u[i][t]=!u[i][t],B(u),n.prev=6,s=(0,l.JU)(Z.db,"properties",e),n.next=10,(0,l.pl)(s,u[i]);case 10:v.Am.success("Thao t\xe1c th\xe0nh c\xf4ng"),n.next=18;break;case 13:n.prev=13,n.t0=n.catch(6),u[i][t]=!u[i][t],B((function(n){return(0,a.Z)((0,a.Z)({},n),{},{data:u})}));case 18:case"end":return n.stop()}}),n,null,[[6,13]])})));return function(e,t){return n.apply(this,arguments)}}(),[O]),H=(0,d.useCallback)(function(){var n=(0,u.Z)((0,r.Z)().mark((function n(e){var a,u,i,s;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=(0,c.Z)(O),!((u=a.findIndex((function(n){return n.id===e})))>-1)){n.next=7;break}return i=(0,l.JU)(Z.db,"properties",e),s=Promise.all([(0,l.oe)(i)].concat((0,w.yC)(a[u],t))),n.next=7,v.Am.promise(s,{pending:"\u0110ang x\xf3a b\xe0i \u0111\u0103ng",success:"X\xf3a b\xe0i \u0111\u0103ng th\xe0nh c\xf4ng",error:g.v});case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[O,t]),X=(0,d.useCallback)(function(){var n=(0,u.Z)((0,r.Z)().mark((function n(e,a){var u,i,s;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(u=(0,c.Z)(O),!((i=u.findIndex((function(n){return n.id===e})))>-1)){n.next=13;break}return n.prev=3,u[i].video=null,s=(0,l.JU)(Z.db,"properties",e),n.next=8,v.Am.promise(Promise.all([(0,l.pl)(s,u[i]),(0,w.Fp)(a,t)]),{pending:"\u0110ang x\xf3a video",success:"X\xf3a video th\xe0nh c\xf4ng",error:g.v});case 8:B(u),n.next=13;break;case 11:n.prev=11,n.t0=n.catch(3);case 13:case"end":return n.stop()}}),n,null,[[3,11]])})));return function(e,t){return n.apply(this,arguments)}}(),[t,O]),Y=function(){var n=(0,u.Z)((0,r.Z)().mark((function n(){var e,t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,m.$m)();case 3:e=n.sent,t=e.data,200===e.status&&window.open(t,"_blank","resizable=yes,top=200,left=200,width=480,height=640"),n.next=11;break;case 9:n.prev=9,n.t0=n.catch(0);case 11:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(){return n.apply(this,arguments)}}();return(0,d.useEffect)((function(){D.slug&&(K.current.value=D.slug)}),[D.slug]),(0,d.useEffect)((function(){return function(){s()}}),[]),(0,L.jsxs)("div",{className:"min-h-screen p-5",children:[(0,L.jsx)("h1",{children:"Qu\u1ea3n tr\u1ecb"}),(0,L.jsxs)("div",{className:"w-full",children:[(0,L.jsxs)("div",{className:"flex my-2 gap-2 flex-wrap",children:[(0,L.jsx)("input",{ref:K,placeholder:"Nh\u1eadp ID c\u1ea7n tra c\u1ee9u",type:"text",className:"input max-w-[400px] w-full"}),(0,L.jsxs)("button",{onClick:function(n){K.current.value&&(S({slug:K.current.value}),R())},className:"btn",children:[(0,L.jsx)(f.RB5,{}),(0,L.jsx)("span",{children:"Tra c\u1ee9u"})]}),(0,L.jsxs)("button",{onClick:function(){K.current&&(D.slug&&U(),K.current.value="",S({}))},className:"btn btn--secondary",children:[(0,L.jsx)(f.oHP,{}),(0,L.jsx)("span",{children:"X\xf3a"})]}),(0,L.jsx)("div",{className:"flex-grow"}),(0,L.jsxs)("button",{onClick:function(){U()},className:"btn",children:[(0,L.jsx)(f.Em2,{}),(0,L.jsx)("span",{children:"Refresh"})]}),(0,L.jsxs)("button",{onClick:function(){return n("/")},className:"btn btn--secondary",children:[(0,L.jsx)(f.iqr,{}),(0,L.jsx)("span",{children:"V\u1ec1 trang ch\u1ee7"})]}),(0,L.jsxs)("button",{onClick:Y,className:"btn",children:[(0,L.jsx)(f.IDO,{}),(0,L.jsx)("span",{children:"L\xe0m m\u1edbi token"})]})]}),(0,L.jsxs)("table",{className:"table-auto w-full min-w-[1024px] overflow-y-auto",children:[(0,L.jsx)("thead",{children:(0,L.jsxs)("tr",{children:[(0,L.jsx)("th",{children:"T\xean"}),(0,L.jsx)("th",{children:"Ng\xe0y \u0111\u0103ng"}),(0,L.jsx)("th",{children:"\u1ea2nh thanh to\xe1n"}),(0,L.jsx)("th",{children:"Link video"}),(0,L.jsx)("th",{children:"Thao t\xe1c video"}),(0,L.jsx)("th",{children:"Thao t\xe1c b\xe0i \u0111\u0103ng"})]})}),(0,L.jsx)("tbody",{children:null!==P&&void 0!==P&&P.length?(0,L.jsx)(L.Fragment,{children:null===P||void 0===P?void 0:P.map((function(n,e){var t=n.id,r=n.subject,a=n.video,c=n.createdAt,u=n.hideVideo,i=n.published,s=n.paymentImage;return(0,L.jsxs)("tr",{className:"hover:bg-gray-100 cursor-default",children:[(0,L.jsx)("td",{children:r}),(0,L.jsx)("td",{children:o()(1e3*c).format("DD/MM/YYYY - HH:mm")}),(0,L.jsx)("td",{children:s?(0,L.jsx)("img",{className:"relative w-[150px] h-[150px] object-cover",src:"https://lh3.googleusercontent.com/d/".concat(s.id),alt:""}):"---"}),(0,L.jsx)("td",{children:a?(0,L.jsx)("object",{className:"relative mx-auto w-[192px] aspect-video",data:a.value,title:"video"}):"---"}),(0,L.jsx)("td",{children:(0,L.jsx)(b.o1,{hideToggle:!0,disableDelete:!a,booleanVal:u,onDelete:function(){return X(t,a.id)},onToggle:function(){return M(t,"hideVideo")}})}),(0,L.jsx)("td",{children:(0,L.jsx)(b.o1,{booleanVal:!i,onDelete:function(){return H(t)},onToggle:function(){return M(t,"published")}})})]},t)}))}):(0,L.jsx)("tr",{className:"text-center",children:(0,L.jsx)("td",{colSpan:100,children:F?"Loading...":"Kh\xf4ng c\xf3 data"})})})]}),(0,L.jsxs)("div",{className:"flex gap-3 mt-5",children:[(0,L.jsxs)("button",{className:"btn",onClick:U,children:[(0,L.jsx)(h.b2E,{}),"Trang \u0111\u1ea7u"]}),(0,L.jsxs)("button",{className:(0,x.Z)("btn",!(null!==P&&void 0!==P&&P.length)||P.length<20&&"btn--disabled"),onClick:R,children:["Trang sau",(0,L.jsx)(h.sOJ,{})]})]})]})]})}}}]);