"use strict";(self.webpackChunkvialand=self.webpackChunkvialand||[]).push([[833],{6791:function(e,n,t){t.d(n,{r:function(){return i}});var r=t(4165),s=t(5861),c=t(9439),a=t(7313),u=t(9225);function i(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=(0,a.useState)("idle"),i=(0,c.Z)(t,2),l=i[0],o=i[1],d=(0,a.useState)(null),h=(0,c.Z)(d,2),x=h[0],f=h[1],p=(0,a.useState)(null),m=(0,c.Z)(p,2),v=m[0],b=m[1],g="pending"===l,j="error"===l,Z=(0,a.useCallback)(function(){var n=(0,s.Z)((0,r.Z)().mark((function n(t){var s;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o("pending"),f(null),b(null),n.prev=3,n.next=6,e();case 6:return s=n.sent,t&&(f(s),o("success")),n.abrupt("return",s);case 11:n.prev=11,n.t0=n.catch(3),t&&(o("error"),b(n.t0));case 14:case"end":return n.stop()}}),n,null,[[3,11]])})));return function(e){return n.apply(this,arguments)}}(),[e]);return(0,u.u)((function(e){n&&Z(e())}),[n]),(0,a.useEffect)((function(){return function(){o("idle"),f(null),b(null)}}),[]),{isLoading:g,isError:j,status:l,data:x,error:v,execute:function(){return Z(!0)}}}},9225:function(e,n,t){t.d(n,{u:function(){return s}});var r=t(7313);function s(e,n){var t=(0,r.useRef)(e);t.current=e;var s=(0,r.useRef)(!1);(0,r.useEffect)((function(){return s.current=!0,t.current((function(){return s.current})),function(){s.current=!1}}),n)}},3833:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var r=t(4165),s=t(3433),c=t(5861),a=t(9439),u=t(658),i=t.n(u),l=t(4457),o=t(7313),d=t(7864),h=t(9466),x=t(8512),f=t(1716),p=t(623),m=t(7629),v=t(5123),b=t(8469),g=t(1413),j=t(4925),Z=t(6791),w=t(9225),N=["execute"];var k=t(4511),y=t(887),T=t(3061),C=t(2539),E=t(6417);function S(){var e=(0,k.$)().t,n=function(){var e=(0,Z.r)((function(){return m.apply(this,arguments)}),!1),n=e.execute,t=(0,j.Z)(e,N),s=(0,o.useState)(!1),u=(0,a.Z)(s,2),i=u[0],d=u[1],h=(0,o.useState)(void 0),x=(0,a.Z)(h,2),f=x[0],p=x[1];function m(){return(m=(0,c.Z)((0,r.Z)().mark((function e(){var n,t,s,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.prev=1,f&&n.push((0,l.TQ)(f)),t=l.IO.apply(void 0,[(0,l.hJ)(v.db,"ads"),(0,l.Xo)("createdAt","desc")].concat(n,[(0,l.b9)(30)])),s=[],e.next=7,(0,l.PL)(t);case 7:return c=e.sent,p(c.docs[c.docs.length-1]),c.docs.forEach((function(e){s.push((0,g.Z)({id:e.id},e.data()))})),e.abrupt("return",s);case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}(0,w.u)((function(e){!i&&e()&&(n(),d(!0))}),[i]);var b=(0,o.useCallback)((function(){d(!1)}),[]),k=(0,o.useCallback)((function(){p(void 0),d(!1)}),[]);return(0,g.Z)((0,g.Z)({},t),{},{refetch:b,clear:k})}(),t=n.data,u=n.isLoading,S=n.refetch,q=n.clear,L=(0,o.useState)([]),A=(0,a.Z)(L,2),D=A[0],I=A[1],J=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(n,t){var c,a,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=(0,s.Z)(D),!((a=c.findIndex((function(e){return e.id===n})))>-1)){e.next=18;break}return c[a][t]=!c[a][t],I(c),e.prev=6,u=(0,l.JU)(v.db,"ads",n),e.next=10,(0,l.pl)(u,c[a]);case 10:x.Am.success("Thao t\xe1c th\xe0nh c\xf4ng"),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(6),c[a][t]=!c[a][t],I(c);case 18:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(n,t){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){t&&I(t)}),[t]),u?(0,E.jsx)(p.x4,{title:"\u0110ang l\u1ea5y th\xf4ng tin"}):(0,E.jsxs)("div",{className:"min-h-screen p-5",children:[(0,E.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mb-5",children:[(0,E.jsx)("h1",{className:"font-medium text-base md:text-lg",children:"Qu\u1ea3ng c\xe1o"}),(0,E.jsx)("div",{className:"flex-grow"}),(0,E.jsx)(h.rU,{to:"/chothue/tao-quang-cao",children:(0,E.jsxs)("button",{className:"btn",children:[(0,E.jsx)(d.Lfi,{}),"T\u1ea1o qu\u1ea3ng c\xe1o"]})})]}),(0,E.jsx)("div",{className:"overflow-x-auto",children:(0,E.jsxs)("table",{className:"mt-5 table-auto",children:[(0,E.jsx)("thead",{children:(0,E.jsxs)("tr",{children:[(0,E.jsx)("th",{children:"ID"}),(0,E.jsx)("th",{className:"min-w-[200px] max-w-[300px]",children:"Ti\xeau \u0111\u1ec1"}),(0,E.jsx)("th",{className:"min-w-[130px] max-w-[300px]",children:"Ng\xe0y \u0111\u0103ng"}),(0,E.jsx)("th",{className:"min-w-[80px]",children:"Lo\u1ea1i tin"}),(0,E.jsx)("th",{className:"min-w-[80px]",children:"Tr\u1ea1ng th\xe1i"}),(0,E.jsx)("th",{children:"Thao t\xe1c"})]})}),(0,E.jsx)("tbody",{children:D.map((function(n){return(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{children:(0,E.jsx)("p",{className:"mx-auto text-sm",children:(0,E.jsx)("a",{className:"text-blue-500 hover:text-blue-400",href:"/quang-cao/".concat(n.id),target:"_blank",rel:"noreferrer",children:n.id})})}),(0,E.jsx)("td",{children:(0,E.jsx)("p",{className:"mx-auto text-sm",children:n.title})}),(0,E.jsx)("td",{children:(0,E.jsx)("p",{className:"mx-auto text-sm",children:i()(1e3*n.createdAt).format("DD/MM/YYYY HH:mm")})}),(0,E.jsx)("td",{children:(0,E.jsx)("p",{className:"mx-auto text-sm",children:e(y.Bs[n.type])})}),(0,E.jsx)("td",{children:(0,E.jsx)("p",{className:(0,T.Z)("mx-auto text-sm rounded-full px-2 whitespace-nowrap",n.published?"bg-green-500 text-white":"bg-gray-400 text-white"),children:e(n.published?"published":"unpublished")})}),(0,E.jsx)("td",{children:(0,E.jsx)(p.o1,{toggleText:n.published?"Nh\xe1p":"Xu\u1ea5t b\u1ea3n",booleanVal:!n.published,onToggle:function(){return J(n.id,"published")},onDelete:function(){return e=n.id,void x.Am.promise((0,c.Z)((0,r.Z)().mark((function n(){var t,c,a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t=(0,s.Z)(D),!((c=t.findIndex((function(n){return n.id===e})))>-1)){n.next=11;break}return n.next=6,(0,l.oe)((0,l.JU)(v.db,"ads",e));case 6:return a=(0,b.ih)(t[c].content),n.next=9,f.w(a);case 9:t.splice(c,1),I(t);case 11:n.next=15;break;case 13:n.prev=13,n.t0=n.catch(0);case 15:case"end":return n.stop()}}),n,null,[[0,13]])}))),{pending:"\u0110ang ti\u1ebfn h\xe0nh x\xf3a qu\u1ea3ng c\xe1o",success:"X\xf3a qu\u1ea3ng c\xe1o th\xe0nh c\xf4ng",error:m.v});var e}})})]},n.id)}))})]})}),(0,E.jsxs)("div",{className:"flex gap-3 mt-5",children:[(0,E.jsxs)("button",{className:"btn",onClick:q,children:[(0,E.jsx)(C.b2E,{}),"Trang \u0111\u1ea7u"]}),(0,E.jsxs)("button",{className:(0,T.Z)("btn",!(null!==t&&void 0!==t&&t.length)||t.length<30&&"btn--disabled"),onClick:S,children:["Trang sau",(0,E.jsx)(C.sOJ,{})]})]})]})}}}]);