"use strict";(self.webpackChunkvialand=self.webpackChunkvialand||[]).push([[289],{4396:function(n,e,t){t.d(e,{pM:function(){return r},Cj:function(){return m.Cj},cx:function(){return f},$m:function(){return d},EC:function(){return p}});var r={};t.r(r),t.d(r,{deposit:function(){return c},getAll:function(){return a},verify:function(){return u}});var i=t(8941),o=t(9869),s=i.Z.common.baseApiUrl,a=function(n){return(0,o.Z)("GET",s+"/deposit",n).then((function(n){return n.data}))},c=function(n){return(0,o.Z)("POST",s+"/deposit",n)},u=function(n){return(0,o.Z)("PATCH",s+"/deposit/".concat(n,"/verify"))},l=(t(3531),i.Z.common.baseApiUrl),d=function(){return(0,o.Z)("GET",l+"/renew")},f=function(n,e,t){return(0,o.Z)("POST",l+"/news",{fbId:n,pinned:e,projectPinnedExpiredAt:t})},p=function(){return(0,o.Z)("POST",l+"/news/sync")},m=t(1716)},1716:function(n,e,t){t.d(e,{Cj:function(){return c},Pe:function(){return u},hF:function(){return l},ws:function(){return s},wt:function(){return a}});var r=t(8941),i=t(9869),o=r.Z.common.baseApiUrl+"/upload",s=function(n){var e=new FormData;return e.append("file",n),(0,i.Z)("POST",o,e)},a=function(n){return(0,i.Z)("DELETE",o,{ids:n})},c=function(n){var e=new FormData;return e.append("file",n),(0,i.Z)("POST",o+"/google-img",e)},u=function(n,e){var t=new FormData;return t.append("file",n),t.append("newsId",e),(0,i.Z)("POST",o+"/google-vid",t)},l=function(n){return(0,i.Z)("DELETE",o+"/google",{ids:n})}},9323:function(n,e,t){t.d(e,{H:function(){return p}});var r=t(4165),i=t(5861),o=t(9439),s=t(2751),a=t(6316),c=t(7313),u=t(5798),l=t(5831),d=t(8469),f=t(2440);function p(n){var e=(0,c.useState)(""),t=(0,o.Z)(e,2),p=t[0],m=t[1],x=(0,l.s)().socket;return(0,c.useEffect)((function(){var e=(0,s.x0)(8);x.emit(u.Q.initNewsAdd,e);var t="".concat(window.location.origin,"/upload?sessionId=").concat(e);a.toString(t,(function(n,e){n||m(e)})),x.on(u.Q.imageUploaded(e),function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new File([t],"payment-image.webp",{type:"image/webp"}),e.next=3,(0,f.vZ)(i);case 3:i.src=e.sent,i.id=(0,d.Wb)(),n(i);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}),[]),{sessionQR:p}}},289:function(n,e,t){t.r(e),t.d(e,{default:function(){return Z}});var r=t(1413),i=t(4165),o=t(5861),s=t(9439),a=t(3061),c=t(7313),u=t(5627),l=t(4511),d=t(7864),f=t(8512),p=t(4396),m=t(1110),x=t(6404),w=t(9323),v=t(9466),h=t(2440),g=t(6417);function Z(){var n=(0,l.$)().t,e=(0,c.useState)(),t=(0,s.Z)(e,2),Z=t[0],b=t[1],j=(0,c.useState)(""),N=(0,s.Z)(j,2),y=N[0],C=N[1],E=(0,c.useState)(Date.now()),S=(0,s.Z)(E,2),T=S[0],k=S[1],P=(0,w.H)((function(n){b(n),C(URL.createObjectURL(n))})).sessionQR,A=(0,u.cI)({defaultValues:{amount:x.z1}}),D=A.handleSubmit,F=A.reset,U=A.register;return(0,c.useEffect)((function(){document.title=n("deposit")}),[]),(0,g.jsx)("div",{className:"max-w-[1024px] px-5 xl:px-0 py-5 mx-auto h-full flex flex-col xl:flex-row gap-2",children:(0,g.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-5",children:[(0,g.jsx)("div",{className:"col-span-1",children:(0,g.jsx)(m.qv,{isDeposit:!0,sessionQR:P})}),(0,g.jsxs)("div",{className:"col-span-1 space-y-5",children:[(0,g.jsxs)(v.rU,{className:"flex items-center gap-2 link w-fit",to:"..",children:[(0,g.jsx)(d.CF5,{className:"text-2xl"}),n("back")]}),(0,g.jsx)(m.cw,{htmlFor:"amount",label:"".concat(n("amount")," (VN\u0110)"),children:(0,g.jsx)("input",(0,r.Z)((0,r.Z)({},U("amount",{required:!0,min:x.z1})),{},{step:1e3,className:"input",placeholder:n("enter_deposit_amount"),type:"number",min:x.z1}))}),y&&(0,g.jsxs)("div",{className:"relative mx-auto w-full md:w-[259px]",children:[(0,g.jsx)("img",{className:"w-full rounded",src:y,alt:""}),(0,g.jsx)(d.oHP,{color:"#000",size:21,className:"absolute select-none rounded-full shadow cursor-pointer bg-white top-1 right-1 p-1",onClick:function(){b(null),C("")}})]}),!y&&(0,g.jsx)(m.cw,{htmlFor:"images",label:n("receipt_screenshot"),children:(0,g.jsx)(m.Ur,{accepts:h.Gs,limitMb:x.Te,className:"mx-auto w-full",placeholder:n("upload_receipt_screenshot"),onChange:function(n){b(n[0])}},T)}),(0,g.jsx)("button",{type:"button",disabled:!Z,className:(0,a.Z)("btn w-full mt-5",!Z&&"btn--disabled"),onClick:function(){D((function(e){var t=e.amount;Z&&f.Am.promise((0,o.Z)((0,i.Z)().mark((function n(){var e,r;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,p.Cj)(Z);case 2:return e=n.sent,r=e.data.id,n.next=6,p.pM.deposit({amount:t,paymentImageId:r});case 6:F(),b(void 0),C(""),k(Date.now());case 7:case"end":return n.stop()}}),n)}))),{pending:n("loading"),success:n("deposit_successfully"),error:n("deposit_failed")})}))()},children:n("deposit")})]})]})})}}}]);