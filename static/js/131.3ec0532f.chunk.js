"use strict";(self.webpackChunkvialand=self.webpackChunkvialand||[]).push([[131],{5905:function(e,n,t){t.d(n,{iy:function(){return i},$m:function(){return c}});var r=t(9869),a=t(8941).Z.common.baseApiUrl,c=function(){return(0,r.Z)("GET",a+"/renew")},i=function(){return(0,r.Z)("POST",a+"/notification")}},9869:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(4165),a=t(5861),c=t(1172);function i(e,n,t){return s.apply(this,arguments)}function s(){return(s=(0,a.Z)((0,r.Z)().mark((function e(n,t,a){var i,s,u,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={method:n,mode:"cors",headers:{"Content-Type":"application/json",secret:"h6N&d3ZpiUZ@Mx9sjAF0!"}},s=t,a&&("GET"===n?(u=c.stringify(a),s+="?"+u):(i.body=a instanceof FormData?a:JSON.stringify(a),a instanceof FormData&&(i.headers={secret:"h6N&d3ZpiUZ@Mx9sjAF0!"}))),e.next=5,fetch(s,i);case 5:if(!(o=e.sent).ok){e.next=10;break}return e.next=9,o.json();case 9:return e.abrupt("return",e.sent);case 10:return e.abrupt("return",void 0);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},7629:function(e,n,t){t.d(n,{v:function(){return r}});var r="\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i sau \xedt ph\xfat"},6791:function(e,n,t){t.d(n,{r:function(){return u}});var r=t(4165),a=t(5861),c=t(9439),i=t(7313),s=t(9225);function u(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=(0,i.useState)("idle"),u=(0,c.Z)(t,2),o=u[0],l=u[1],d=(0,i.useState)(null),h=(0,c.Z)(d,2),p=h[0],f=h[1],x=(0,i.useState)(null),m=(0,c.Z)(x,2),v=m[0],g=m[1],b="pending"===o,j="error"===o,w=(0,i.useCallback)(function(){var n=(0,a.Z)((0,r.Z)().mark((function n(t){var a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l("pending"),f(null),g(null),n.prev=3,n.next=6,e();case 6:return a=n.sent,t&&(f(a),l("success")),n.abrupt("return",a);case 11:n.prev=11,n.t0=n.catch(3),t&&(l("error"),g(n.t0));case 14:case"end":return n.stop()}}),n,null,[[3,11]])})));return function(e){return n.apply(this,arguments)}}(),[e]);return(0,s.u)((function(e){n&&w(e())}),[n]),(0,i.useEffect)((function(){return function(){l("idle"),f(null),g(null)}}),[]),{isLoading:b,isError:j,status:o,data:p,error:v,execute:function(){return w(!0)}}}},9225:function(e,n,t){t.d(n,{u:function(){return a}});var r=t(7313);function a(e,n){var t=(0,r.useRef)(e);t.current=e;var a=(0,r.useRef)(!1);(0,r.useEffect)((function(){return a.current=!0,t.current((function(){return a.current})),function(){a.current=!1}}),n)}},8468:function(e,n,t){t.d(n,{K:function(){return i}});var r=t(7313),a=t(7890),c=t(1172);function i(){var e=(0,a.TH)(),n=e.pathname,t=e.search,i=(0,a.s0)();return[(0,r.useMemo)((function(){return c.parse(t)}),[t]),(0,r.useCallback)((function(e){i(n+"?"+c.stringify(e,{skipEmptyString:!0,skipNull:!0}),{replace:!0})}),[n,i])]}},6243:function(e,n,t){t.d(n,{db:function(){return b}});var r=t(271),a=t(995),c=t(4457),i=t(6797),s=t(8941),u=s.Z.firebase,o=u.apiKey,l=u.appId,d=u.databaseURL,h=u.projectId,p=u.storageBucket,f=u.authDomain,x=u.messagingSenderId,m=s.Z.google.recaptchaSiteKey,v={apiKey:o,authDomain:f,databaseURL:d,projectId:h,storageBucket:p,messagingSenderId:x,appId:l},g=(0,r.ZF)(v),b=(0,c.ad)(g);(0,i.cF)(g),(0,a.yu)(g,{provider:new a.z9(m),isTokenAutoRefreshEnabled:!0})},3278:function(e,n,t){t.d(n,{Fp:function(){return a},Qm:function(){return r},yC:function(){return c}});var r=function(e,n){return Promise.all(e.map((function(e){return fetch("https://www.googleapis.com/drive/v2/files/".concat(e.id,"?fields=thumbnailLink,embedLink,id"),{method:"GET",headers:{Authorization:"Bearer ".concat(n)}})}))).then((function(e){return Promise.all(e.map((function(e){return e.json()}))).then((function(e){return e.map((function(e){return{id:e.id,thumbnailLink:e.thumbnailLink,embedLink:e.embedLink,webViewLink:e.webViewLink}}))}))})).catch()},a=function(e,n){return fetch("https://www.googleapis.com/drive/v3/files/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(n)}}).then((function(){return!0})).catch((function(){return!1}))},c=function(e,n){var t=[];return["video","images","paymentImage"].forEach((function(r){var c=e[r];c&&(Array.isArray(c)?c.forEach((function(e){return t.push(a(e.id,n))})):Object.keys(c).length&&null!==c&&void 0!==c&&c.id&&t.push(a(null===c||void 0===c?void 0:c.id,n)))})),t}},4131:function(e,n,t){t.r(n),t.d(n,{default:function(){return C}});var r=t(4165),a=t(3433),c=t(5861),i=t(9439),s=t(3061),u=t(658),o=t.n(u),l=t(4457),d=t(7313),h=t(7864),p=t(2539),f=t(8512),x=t(5905),m=t(623),v=t(7629),g=t(5857),b=t(8468),j=t(6243),w=t(3278),k=t(1413),Z=t(4925),y=t(6791),N=t(9225),T=["execute"];var E=t(6417);function C(){var e=(0,g.Eu)().token,n=(0,b.K)(),t=(0,i.Z)(n,2),u=t[0],C=t[1],L=function(e){var n=e.slug,t=(0,d.useState)(void 0),a=(0,i.Z)(t,2),s=a[0],u=a[1],o=(0,d.useState)(!1),h=(0,i.Z)(o,2),p=h[0],f=h[1],x=(0,y.r)((function(){return g.apply(this,arguments)}),!1),m=x.execute,v=(0,Z.Z)(x,T);function g(){return(g=(0,c.Z)((0,r.Z)().mark((function e(){var t,a,c,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,n&&t.push((0,l.ar)("slug","==",n)),s&&!n&&t.push((0,l.TQ)(s)),a=l.IO.apply(void 0,[(0,l.hJ)(j.db,"properties"),(0,l.Xo)("createdAt","desc")].concat(t,[(0,l.b9)(50)])),c=[],e.next=8,(0,l.PL)(a);case 8:return i=e.sent,u(i.docs[i.docs.length-1]),i.forEach((function(e){c.push((0,k.Z)({id:e.id},e.data()))})),e.abrupt("return",c);case 14:return e.prev=14,e.t0=e.catch(1),e.abrupt("return",[]);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}var b=(0,d.useCallback)((function(){f(!1)}),[]),w=(0,d.useCallback)((function(){u(void 0),f(!1)}),[]);return(0,N.u)((function(e){!p&&e()&&(m(),f(!0))}),[p]),(0,k.Z)((0,k.Z)({},v),{},{refetch:b,clear:w})}({slug:u.slug}),I=L.isLoading,A=L.data,D=L.refetch,S=L.clear,P=(0,d.useState)([]),F=(0,i.Z)(P,2),R=F[0],U=F[1];(0,d.useEffect)((function(){U(null!==A&&void 0!==A?A:[])}),[A]);var V=(0,d.useRef)(null),B=(0,d.useCallback)(function(){var e=(0,c.Z)((0,r.Z)().mark((function e(n,t){var c,i,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=(0,a.Z)(R),!((i=c.findIndex((function(e){return e.id===n})))>-1)){e.next=18;break}return c[i][t]=!c[i][t],U(c),e.prev=6,s=(0,l.JU)(j.db,"properties",n),e.next=10,(0,l.pl)(s,c[i]);case 10:f.Am.success("Thao t\xe1c th\xe0nh c\xf4ng"),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(6),c[i][t]=!c[i][t],U(c);case 18:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(n,t){return e.apply(this,arguments)}}(),[R]),G=(0,d.useCallback)(function(){var n=(0,c.Z)((0,r.Z)().mark((function n(t){var c,i,s,u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=(0,a.Z)(R),!((i=c.findIndex((function(e){return e.id===t})))>-1)){n.next=9;break}return s=(0,l.JU)(j.db,"properties",t),u=Promise.all([(0,l.oe)(s)].concat((0,w.yC)(c[i],e))),n.next=7,f.Am.promise(u,{pending:"\u0110ang x\xf3a b\xe0i \u0111\u0103ng",success:"X\xf3a b\xe0i \u0111\u0103ng th\xe0nh c\xf4ng",error:v.v});case 7:c.splice(i,1),U(c);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[R,e]),H=(0,d.useCallback)(function(){var n=(0,c.Z)((0,r.Z)().mark((function n(t,c){var i,s,u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=(0,a.Z)(R),!((s=i.findIndex((function(e){return e.id===t})))>-1)){n.next=13;break}return n.prev=3,i[s].video=null,u=(0,l.JU)(j.db,"properties",t),n.next=8,f.Am.promise(Promise.all([(0,l.pl)(u,i[s]),(0,w.Fp)(c,e)]),{pending:"\u0110ang x\xf3a video",success:"X\xf3a video th\xe0nh c\xf4ng",error:v.v});case 8:U(i),n.next=13;break;case 11:n.prev=11,n.t0=n.catch(3);case 13:case"end":return n.stop()}}),n,null,[[3,11]])})));return function(e,t){return n.apply(this,arguments)}}(),[e,R]),J=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.$m)();case 3:n=e.sent,t=n.data,200===n.status&&setTimeout((function(){window.open(t,"_blank","resizable=yes,top=200,left=200,width=480,height=640")}),0),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return(0,d.useEffect)((function(){u.slug&&(V.current.value=u.slug)}),[u.slug]),(0,E.jsxs)("div",{className:"min-h-screen p-5",children:[(0,E.jsx)("h1",{className:"font-medium text-base md:text-lg mb-5",children:"Danh s\xe1ch tin"}),(0,E.jsxs)("div",{className:"w-full",children:[(0,E.jsxs)("div",{className:"flex my-2 gap-2 flex-wrap",children:[(0,E.jsx)("input",{ref:V,placeholder:"Nh\u1eadp ID c\u1ea7n tra c\u1ee9u",type:"text",className:"input max-w-[400px] w-full"}),(0,E.jsxs)("button",{onClick:function(e){V.current.value&&(C({slug:V.current.value}),D())},className:"btn",children:[(0,E.jsx)(h.RB5,{}),(0,E.jsx)("span",{children:"Tra c\u1ee9u"})]}),(0,E.jsxs)("button",{onClick:function(){V.current&&(u.slug&&S(),V.current.value="",C({}))},className:"btn btn--secondary",children:[(0,E.jsx)(h.oHP,{}),(0,E.jsx)("span",{children:"X\xf3a"})]}),(0,E.jsx)("div",{className:"flex-grow"}),(0,E.jsxs)("button",{onClick:function(){S()},className:"btn",children:[(0,E.jsx)(h.Em2,{}),(0,E.jsx)("span",{children:"Refresh"})]}),(0,E.jsxs)("button",{onClick:J,className:"btn",children:[(0,E.jsx)(h.IDO,{}),(0,E.jsx)("span",{children:"L\xe0m m\u1edbi token"})]})]}),(0,E.jsx)("div",{className:"overflow-auto",children:(0,E.jsxs)("table",{className:"table-auto",children:[(0,E.jsx)("thead",{children:(0,E.jsxs)("tr",{children:[(0,E.jsx)("th",{className:"min-w-[200px] max-w-[300px]",children:"T\xean"}),(0,E.jsx)("th",{className:"min-w-[130px] max-w-[300px]",children:"Ng\xe0y \u0111\u0103ng"}),(0,E.jsx)("th",{className:"min-w-[130px] max-w-[300px]",children:"\u1ea2nh thanh to\xe1n"}),(0,E.jsx)("th",{className:"min-w-[130px] max-w-[300px]",children:"Link video"}),(0,E.jsx)("th",{className:"min-w-[130px] max-w-[300px]",children:"Thao t\xe1c video"}),(0,E.jsx)("th",{className:"min-w-[130px] max-w-[300px]",children:"Thao t\xe1c b\xe0i \u0111\u0103ng"}),(0,E.jsx)("th",{className:"min-w-[130px] max-w-[300px]",children:"Ghim trang ch\u1ee7"}),(0,E.jsx)("th",{className:"min-w-[130px] max-w-[300px]",children:"Ghim d\u1ef1 \xe1n"})]})}),(0,E.jsx)("tbody",{children:null!==R&&void 0!==R&&R.length?(0,E.jsx)(E.Fragment,{children:null===R||void 0===R?void 0:R.map((function(e){var n=e.id,t=e.subject,r=e.video,a=e.createdAt,c=e.hideVideo,i=e.published,s=e.paymentImage,u=e.featurePinned,l=e.projectPinned;return(0,E.jsxs)("tr",{className:"hover:bg-gray-100 cursor-default",children:[(0,E.jsx)("td",{children:(0,E.jsx)("p",{className:"mx-auto text-sm",children:t})}),(0,E.jsx)("td",{children:(0,E.jsx)("p",{className:"mx-auto text-sm",children:o()(1e3*a).format("DD/MM/YYYY - HH:mm")})}),(0,E.jsx)("td",{children:s?(0,E.jsx)("img",{className:"relative w-[150px] h-[150px] object-cover",src:"https://lh3.googleusercontent.com/d/".concat(s.id),alt:""}):"---"}),(0,E.jsx)("td",{children:r?(0,E.jsx)("object",{className:"relative mx-auto w-[192px] aspect-video",data:r.value,title:"video"}):"---"}),(0,E.jsx)("td",{children:(0,E.jsx)(m.o1,{toggleText:c?"Hi\u1ec7n":"\u1ea8n",hideToggle:!r,disableDelete:!r,booleanVal:c,onDelete:function(){return H(n,r.id)},onToggle:function(){return B(n,"hideVideo")}})}),(0,E.jsx)("td",{children:(0,E.jsx)(m.o1,{toggleText:i?"\u1ea8n":"Hi\u1ec7n",booleanVal:!i,onDelete:function(){return G(n)},onToggle:function(){return B(n,"published")}})}),(0,E.jsx)("td",{children:(0,E.jsx)(m.o1,{toggleText:u?"B\u1ecf ghim":"Ghim",booleanVal:!u,onToggle:function(){return B(n,"featurePinned")}})}),(0,E.jsx)("td",{children:(0,E.jsx)(m.o1,{toggleText:l?"B\u1ecf ghim":"Ghim",booleanVal:!l,onToggle:function(){return B(n,"projectPinned")}})})]},n)}))}):(0,E.jsx)("tr",{className:"text-center",children:(0,E.jsx)("td",{colSpan:100,children:I?"Loading...":"Kh\xf4ng c\xf3 data"})})})]})}),(0,E.jsxs)("div",{className:"flex gap-3 mt-5",children:[(0,E.jsxs)("button",{className:"btn",onClick:S,children:[(0,E.jsx)(p.b2E,{}),"Trang \u0111\u1ea7u"]}),(0,E.jsxs)("button",{className:(0,s.Z)("btn",!(null!==A&&void 0!==A&&A.length)||A.length<50&&"btn--disabled"),onClick:D,children:["Trang sau",(0,E.jsx)(p.sOJ,{})]})]})]})]})}}}]);