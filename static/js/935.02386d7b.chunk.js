"use strict";(self.webpackChunkvialand=self.webpackChunkvialand||[]).push([[935],{9023:function(n,e,t){t.d(e,{iy:function(){return d},dD:function(){return o},$m:function(){return l}});var r=t(4165),a=t(5861),i=t(1172);function c(n,e,t){return s.apply(this,arguments)}function s(){return(s=(0,a.Z)((0,r.Z)().mark((function n(e,t,a){var c,s,u,o;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={method:e,mode:"cors",headers:{"Content-Type":"application/json",secret:"!k9Ud&5ZqVM@x3CjsF0io"}},s=t,a&&("GET"===e?(u=i.stringify(a),s+="?"+u):c.body=JSON.stringify(a)),n.next=5,fetch(s,c);case 5:if(!(o=n.sent).ok){n.next=10;break}return n.next=9,o.json();case 9:return n.abrupt("return",n.sent);case 10:return n.abrupt("return",void 0);case 11:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var u="https://mail.vialand.vn",o=function(n){return c("GET","https://mail.vialand.vn/news",n)},l=function(){return c("GET",u+"/renew")},d=function(){return c("POST",u+"/notification")}},7629:function(n,e,t){t.d(e,{v:function(){return r}});var r="\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i sau \xedt ph\xfat"},8468:function(n,e,t){t.d(e,{K:function(){return c}});var r=t(7313),a=t(7890),i=t(1172);function c(){var n=(0,a.TH)(),e=n.pathname,t=n.search,c=(0,a.s0)();return[(0,r.useMemo)((function(){return i.parse(t)}),[t]),(0,r.useCallback)((function(n){c(e+"?"+i.stringify(n),{replace:!0})}),[e,c])]}},6243:function(n,e,t){t.d(e,{db:function(){return h}});var r=t(271),a=t(4457),i=t(8941).Z.firebase,c=i.apiKey,s=i.appId,u=i.databaseURL,o=i.projectId,l=i.storageBucket,d={apiKey:c,authDomain:i.authDomain,databaseURL:u,projectId:o,storageBucket:l,messagingSenderId:i.messagingSenderId,appId:s},f=(0,r.ZF)(d),h=(0,a.ad)(f)},3278:function(n,e,t){t.d(e,{Fp:function(){return a},Qm:function(){return r},yC:function(){return i}});var r=function(n,e){return Promise.all(n.map((function(n){return fetch("https://www.googleapis.com/drive/v2/files/".concat(n.id,"?fields=thumbnailLink,embedLink,id"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}})}))).then((function(n){return Promise.all(n.map((function(n){return n.json()}))).then((function(n){return n.map((function(n){return{id:n.id,thumbnailLink:n.thumbnailLink,embedLink:n.embedLink,webViewLink:n.webViewLink}}))}))})).catch()},a=function(n,e){return fetch("https://www.googleapis.com/drive/v3/files/".concat(n),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}}).then((function(){return!0})).catch((function(){return!1}))},i=function(n,e){var t=[];return["video","images","paymentImage"].forEach((function(r){var i=n[r];i&&(Array.isArray(i)?i.forEach((function(n){return t.push(a(n.id,e))})):Object.keys(i).length&&null!==i&&void 0!==i&&i.id&&t.push(a(null===i||void 0===i?void 0:i.id,e)))})),t}},6935:function(n,e,t){t.r(e),t.d(e,{default:function(){return y}});var r=t(4165),a=t(1413),i=t(3433),c=t(5861),s=t(9439),u=t(7313),o=t(658),l=t.n(o),d=t(7864),f=t(4457),h=t(7890),p=t(8512),m=t(9023),x=t(5398),v=t(6404),g=t(7629),b=t(5857),j=t(8468),Z=t(6243),k=t(3278),w=t(6417);function y(){var n=(0,h.s0)(),e=(0,h.TH)().search,t=(0,b.E)(),o=t.token,y=t.onLogout,N=(0,j.K)(),T=(0,s.Z)(N,2),C=T[0],E=T[1],I=(0,u.useState)(!1),L=(0,s.Z)(I,2),D=L[0],A=L[1],S=(0,u.useState)({data:[],limit:v.p,total:0,fetched:!1}),V=(0,s.Z)(S,2),P=V[0],U=V[1],B=(0,u.useRef)(null),F=(0,u.useCallback)(function(){var n=(0,c.Z)((0,r.Z)().mark((function n(e,t){var c,s,u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=(0,i.Z)(P.data),!((s=c.findIndex((function(n){return n.id===e})))>-1)){n.next=18;break}return c[s][t]=!c[s][t],U((function(n){return(0,a.Z)((0,a.Z)({},n),{},{data:c})})),n.prev=6,u=(0,f.JU)(Z.db,"properties",e),n.next=10,(0,f.pl)(u,c[s]);case 10:p.Am.success("Thao t\xe1c th\xe0nh c\xf4ng"),n.next=18;break;case 13:n.prev=13,n.t0=n.catch(6),c[s][t]=!c[s][t],U((function(n){return(0,a.Z)((0,a.Z)({},n),{},{data:c})}));case 18:case"end":return n.stop()}}),n,null,[[6,13]])})));return function(e,t){return n.apply(this,arguments)}}(),[P.data]),H=(0,u.useCallback)(function(){var n=(0,c.Z)((0,r.Z)().mark((function n(e){var t,c,s,u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=(0,i.Z)(P.data),!((c=t.findIndex((function(n){return n.id===e})))>-1)){n.next=8;break}return s=(0,f.JU)(Z.db,"properties",e),u=Promise.all([(0,f.oe)(s)].concat((0,k.yC)(t[c],o))),n.next=7,p.Am.promise(u,{pending:"\u0110ang x\xf3a b\xe0i \u0111\u0103ng",success:"X\xf3a b\xe0i \u0111\u0103ng th\xe0nh c\xf4ng",error:g.v});case 7:U((function(n){return(0,a.Z)((0,a.Z)({},n),{},{fetched:!1})}));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[P.data,o]),K=(0,u.useCallback)(function(){var n=(0,c.Z)((0,r.Z)().mark((function n(e,t){var c,s,u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=(0,i.Z)(P.data),!((s=c.findIndex((function(n){return n.id===e})))>-1)){n.next=14;break}return n.prev=3,c[s].video=null,u=(0,f.JU)(Z.db,"properties",e),n.next=8,p.Am.promise(Promise.all([(0,f.pl)(u,c[s]),(0,k.Fp)(t,o)]),{pending:"\u0110ang x\xf3a video",success:"X\xf3a video th\xe0nh c\xf4ng",error:g.v});case 8:U((function(n){return(0,a.Z)((0,a.Z)({},n),{},{data:c})})),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),U((function(n){return(0,a.Z)({},n)}));case 14:case"end":return n.stop()}}),n,null,[[3,11]])})));return function(e,t){return n.apply(this,arguments)}}(),[o,P.data]),R=(C.page-1)*P.limit,G=function(){var n=(0,c.Z)((0,r.Z)().mark((function n(){var e,t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,m.$m)();case 3:e=n.sent,t=e.data,200===e.status&&window.open(t,"_blank","resizable=yes,top=200,left=200,width=480,height=640"),n.next=11;break;case 9:n.prev=9,n.t0=n.catch(0);case 11:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(){return n.apply(this,arguments)}}();return(0,u.useEffect)((function(){function n(){return(n=(0,c.Z)((0,r.Z)().mark((function n(){var e,t,i;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return A(!0),e=P.limit,n.next=4,(0,m.dD)((0,a.Z)((0,a.Z)({},C),{},{limit:e}));case 4:t=n.sent,i=t.data,200===t.status?U((function(n){return(0,a.Z)((0,a.Z)({},n),{},{data:i.news,limit:i.limit,total:i.total,fetched:!0})})):(p.Am.error(g.v),U((function(n){return(0,a.Z)((0,a.Z)({},n),{},{fetched:!0})}))),A(!1);case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!P.fetched&&function(){n.apply(this,arguments)}()}),[P.fetched]),(0,u.useEffect)((function(){var n,e=null!==(n=C.page)&&void 0!==n?n:1;E((0,a.Z)((0,a.Z)({},C),{},{page:e}))}),[]),(0,u.useEffect)((function(){U((function(n){return(0,a.Z)((0,a.Z)({},n),{},{fetched:!1})}))}),[e]),(0,u.useEffect)((function(){C.slug&&(B.current.value=C.slug)}),[C.slug]),(0,u.useEffect)((function(){return function(){y()}}),[]),(0,w.jsxs)("div",{className:"min-h-screen p-5",children:[(0,w.jsx)("h1",{children:"Qu\u1ea3n tr\u1ecb"}),(0,w.jsxs)("div",{className:"w-full",children:[(0,w.jsxs)("div",{className:"flex my-2 gap-2 flex-wrap",children:[(0,w.jsx)("input",{ref:B,placeholder:"Nh\u1eadp ID c\u1ea7n tra c\u1ee9u",type:"text",className:"input max-w-[400px] w-full"}),(0,w.jsxs)("button",{onClick:function(n){B.current.value?E((0,a.Z)((0,a.Z)({},C),{},{slug:B.current.value})):E({page:C.page})},className:"btn",children:[(0,w.jsx)(d.RB5,{}),(0,w.jsx)("span",{children:"Tra c\u1ee9u"})]}),(0,w.jsxs)("button",{onClick:function(){E({page:C.page}),B.current&&(B.current.value="")},className:"btn btn--secondary",children:[(0,w.jsx)(d.oHP,{}),(0,w.jsx)("span",{children:"X\xf3a"})]}),(0,w.jsx)("div",{className:"flex-grow"}),(0,w.jsxs)("button",{onClick:function(){U((function(n){return(0,a.Z)((0,a.Z)({},n),{},{fetched:!1})}))},className:"btn",children:[(0,w.jsx)(d.Em2,{}),(0,w.jsx)("span",{children:"Refresh"})]}),(0,w.jsxs)("button",{onClick:function(){return n("/")},className:"btn btn--secondary",children:[(0,w.jsx)(d.iqr,{}),(0,w.jsx)("span",{children:"V\u1ec1 trang ch\u1ee7"})]}),(0,w.jsxs)("button",{onClick:G,className:"btn",children:[(0,w.jsx)(d.IDO,{}),(0,w.jsx)("span",{children:"L\xe0m m\u1edbi token"})]})]}),(0,w.jsxs)("table",{className:"table-auto w-full min-w-[1024px] overflow-y-auto",children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{children:"STT"}),(0,w.jsx)("th",{children:"T\xean"}),(0,w.jsx)("th",{children:"Ng\xe0y \u0111\u0103ng"}),(0,w.jsx)("th",{children:"\u1ea2nh thanh to\xe1n"}),(0,w.jsx)("th",{children:"Link video"}),(0,w.jsx)("th",{children:"Thao t\xe1c video"}),(0,w.jsx)("th",{children:"Thao t\xe1c b\xe0i \u0111\u0103ng"})]})}),(0,w.jsx)("tbody",{children:P.data.length?(0,w.jsx)(w.Fragment,{children:P.data.map((function(n,e){var t=n.id,r=n.subject,a=n.video,i=n.createdAt,c=n.hideVideo,s=n.published,u=n.paymentImage;return(0,w.jsxs)("tr",{className:"hover:bg-gray-100 cursor-default",children:[(0,w.jsx)("td",{children:R+e+1}),(0,w.jsx)("td",{children:r}),(0,w.jsx)("td",{children:l()(1e3*i).format("DD/MM/YYYY - HH:mm")}),(0,w.jsx)("td",{children:u?(0,w.jsx)("div",{className:"relative aspect-sqr",children:(0,w.jsx)("iframe",{className:"absolute top-0 left-0 w-full h-full",title:"paymentImage",scrolling:"no",src:u.value})}):"---"}),(0,w.jsx)("td",{children:a?(0,w.jsx)("div",{className:"relative w-[192px] aspect-video",children:(0,w.jsx)("iframe",{className:"absolute top-0 left-0 w-full h-full",title:"video",scrolling:"no",src:a.value})}):"---"}),(0,w.jsx)("td",{children:(0,w.jsx)(x.o1,{hideToggle:!0,disableDelete:!a,booleanVal:c,onDelete:function(){return K(t,a.id)},onToggle:function(){return F(t,"hideVideo")}})}),(0,w.jsx)("td",{children:(0,w.jsx)(x.o1,{booleanVal:!s,onDelete:function(){return H(t)},onToggle:function(){return F(t,"published")}})})]},t)}))}):(0,w.jsx)("tr",{className:"text-center",children:(0,w.jsx)("td",{colSpan:100,children:D?"Loading...":"Kh\xf4ng c\xf3 data"})})})]}),(0,w.jsx)(x.tl,{total:P.total,page:parseInt(C.page,10),limit:P.limit,onPageChange:function(n){E((0,a.Z)((0,a.Z)({},C),{},{page:n}))}})]})]})}}}]);