"use strict";(self.webpackChunkvialand=self.webpackChunkvialand||[]).push([[974],{6791:function(e,n,t){t.d(n,{r:function(){return s}});var r=t(4165),u=t(5861),a=t(9439),c=t(7313),i=t(9225);function s(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=(0,c.useState)("idle"),s=(0,a.Z)(t,2),o=s[0],l=s[1],f=(0,c.useState)(null),d=(0,a.Z)(f,2),p=d[0],v=d[1],h=(0,c.useState)(null),m=(0,a.Z)(h,2),x=m[0],g=m[1],Z="pending"===o,b="error"===o,k=(0,c.useCallback)(function(){var n=(0,u.Z)((0,r.Z)().mark((function n(t){var u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l("pending"),v(null),g(null),n.prev=3,n.next=6,e();case 6:return u=n.sent,t&&(v(u),l("success")),n.abrupt("return",u);case 11:n.prev=11,n.t0=n.catch(3),t&&(l("error"),g(n.t0));case 14:case"end":return n.stop()}}),n,null,[[3,11]])})));return function(e){return n.apply(this,arguments)}}(),[e]);return(0,i.u)((function(e){n&&k(e())}),[n]),(0,c.useEffect)((function(){return function(){l("idle"),v(null),g(null)}}),[]),{isLoading:Z,isError:b,status:o,data:p,error:x,execute:function(){return k(!0)}}}},3737:function(e,n,t){t.d(n,{M:function(){return a}});var r=t(9439),u=t(7313);function a(e){var n=e.ref,t=e.offset,a=void 0===t?50:t,c=e.loading,i=e.canLoadMore,s=e.fetchFn,o=(0,u.useState)(!1),l=(0,r.Z)(o,2),f=l[0],d=l[1];(0,u.useEffect)((function(){if(null!==n&&void 0!==n&&n.current){var e=function(e){var n=e.target,t=n.getBoundingClientRect().height;n.scrollTop+t>=n.scrollHeight-a?d(!0):d(!1)};return null===n||void 0===n||n.current.addEventListener("scroll",e),function(){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.removeEventListener("scroll",e)}}if(document){var t=function(e){var n=e.currentTarget,t=n.getElementById("footer"),r=n.scrollingElement,u=r.scrollHeight,c=r.scrollTop,i=r.clientHeight;Math.abs(u-i-c)<t.getBoundingClientRect().height+a?d(!0):d(!1)};return document.addEventListener("scroll",t),function(){document.removeEventListener("scroll",t)}}}),[]),(0,u.useEffect)((function(){f&&!c&&i&&(null===s||void 0===s||s())}),[f])}},9225:function(e,n,t){t.d(n,{u:function(){return u}});var r=t(7313);function u(e,n){var t=(0,r.useRef)(e);t.current=e;var u=(0,r.useRef)(!1);(0,r.useEffect)((function(){return u.current=!0,t.current((function(){return u.current})),function(){u.current=!1}}),n)}},8468:function(e,n,t){t.d(n,{K:function(){return c}});var r=t(7313),u=t(7890),a=t(1172);function c(){var e=(0,u.TH)(),n=e.pathname,t=e.search,c=(0,u.s0)();return[(0,r.useMemo)((function(){return a.parse(t)}),[t]),(0,r.useCallback)((function(e){c(n+"?"+a.stringify(e,{skipEmptyString:!0,skipNull:!0}),{replace:!0})}),[n,c])]}},6243:function(e,n,t){t.d(n,{db:function(){return Z}});var r=t(271),u=t(995),a=t(573),c=t(6797),i=t(8941),s=i.Z.firebase,o=s.apiKey,l=s.appId,f=s.databaseURL,d=s.projectId,p=s.storageBucket,v=s.authDomain,h=s.messagingSenderId,m=i.Z.google.recaptchaSiteKey,x={apiKey:o,authDomain:v,databaseURL:f,projectId:d,storageBucket:p,messagingSenderId:h,appId:l},g=(0,r.ZF)(x),Z=(0,a.ad)(g);(0,c.cF)(g),(0,u.yu)(g,{provider:new u.z9(m),isTokenAutoRefreshEnabled:!0})},3974:function(e,n,t){t.r(n),t.d(n,{default:function(){return y}});var r=t(9439),u=t(753),a=t(8468),c=t(7313),i=t(4511),s=t(7864),o=t(8512),l=t(3433),f=t(1413),d=t(4165),p=t(5861),v=t(4925),h=t(573),m=t(6791),x=t(3737),g=t(6243),Z=["execute"];var b=t(6417),k=(0,c.memo)((function(e){var n=e.data,t=void 0===n?[]:n;return(0,b.jsx)(b.Fragment,{children:t.map((function(e){return(0,b.jsx)(u.eu,{data:e},e.id)}))})}));function y(){var e=(0,i.$)().t,n=(0,c.useRef)(null),t=(0,c.useRef)(null),y=(0,a.K)(),E=(0,r.Z)(y,2),j=E[0],w=E[1],L=function(e,n){var t=(0,c.useState)(!1),u=(0,r.Z)(t,2),a=u[0],i=u[1],s=(0,c.useState)([]),o=(0,r.Z)(s,2),b=o[0],k=o[1],y=(0,c.useState)(void 0),E=(0,r.Z)(y,2),j=E[0],w=E[1],L=(0,m.r)((function(){return C.apply(this,arguments)}),!1),N=L.execute,S=(0,v.Z)(L,Z);function R(){return(R=(0,p.Z)((0,d.Z)().mark((function e(){var n;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N();case 3:(n=e.sent)&&k((function(e){return[].concat((0,l.Z)(e),(0,l.Z)(n))})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function C(){return(C=(0,p.Z)((0,d.Z)().mark((function e(){var t,r,u,a,c;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=[],n&&t.push((0,h.ar)("contactNumber","==",n)),j&&t.push((0,h.TQ)(j)),r=h.IO.apply(void 0,[(0,h.hJ)(g.db,"properties"),(0,h.Xo)("createdAt","desc")].concat(t,[(0,h.ar)("published","==",!0),(0,h.b9)(10)])),u=[],e.next=8,(0,h.PL)(r);case 8:return a=e.sent,c=a.docs[a.docs.length-1],a.forEach((function(e){u.push(e.data())})),w(c),i(!1),e.abrupt("return",u);case 16:e.prev=16,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}(0,x.M)({ref:e,canLoadMore:!!j,loading:S.isLoading,fetchFn:function(){return R.apply(this,arguments)}});var I=(0,c.useCallback)((function(){k([]),w(void 0),i(!0)}),[]);return(0,c.useEffect)((function(){I()}),[n]),(0,c.useEffect)((function(){function e(){return(e=(0,p.Z)((0,d.Z)().mark((function e(){var n;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:n=e.sent,k(null!==n&&void 0!==n?n:[]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a&&function(){e.apply(this,arguments)}()}),[a]),(0,f.Z)((0,f.Z)({},S),{},{data:b,clear:I})}(n,j.phoneNumber),N=L.data,S=L.isLoading;return(0,b.jsxs)("div",{className:"p-2 md:p-5 h-full flex items-center flex-col",children:[(0,b.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,b.jsx)("input",{ref:t,defaultValue:j.phoneNumber,placeholder:"0911xxxxxx",className:"input",type:"text",maxLength:12}),(0,b.jsxs)("button",{className:"btn",type:"button",onClick:function(){if(t.current){var n=t.current.value;n&&n.match(/^[0-9]*$/)?w({phoneNumber:n.trim()}):o.Am.warn("".concat(e("invalid_phone_number")))}},children:[(0,b.jsx)(s.RB5,{}),e("search")]})]}),!S&&!(null!==N&&void 0!==N&&N.length)&&(0,b.jsx)(u.x4,{title:"Kh\xf4ng c\xf3 th\xf4ng tin"}),(0,b.jsxs)("div",{className:"max-w-[1000px] w-full flex-1 overflow-y-auto",ref:n,children:[(0,b.jsx)(k,{data:N}),S&&(0,b.jsx)(u.x4,{title:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Z7b,{className:"animate-spin"})," ",e("searching")]})})]})]})}}}]);