"use strict";(self.webpackChunkvialand=self.webpackChunkvialand||[]).push([[522],{1716:function(e,t,n){n.d(t,{Cj:function(){return i},Pe:function(){return o},hF:function(){return u},ws:function(){return s},wt:function(){return l}});var a=n(8941),r=n(9869),c=a.Z.common.baseApiUrl+"/upload",s=function(e){var t=new FormData;return t.append("file",e),(0,r.Z)("POST",c,t)},l=function(e){return(0,r.Z)("DELETE",c,{ids:e})},i=function(e){var t=new FormData;return t.append("file",e),(0,r.Z)("POST",c+"/google-img",t)},o=function(e,t){var n=new FormData;return n.append("file",e),n.append("newsId",t),(0,r.Z)("POST",c+"/google-vid",n)},u=function(e){return(0,r.Z)("DELETE",c+"/google",{ids:e})}},7629:function(e,t,n){n.d(t,{PU:function(){return c},ZE:function(){return r},vh:function(){return a}});var a="\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i sau \xedt ph\xfat",r="\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng li\xean h\u1ec7 qu\u1ea3n tr\u1ecb vi\xean",c="Qu\xe1 tr\xecnh t\u1ea3i l\xean \u0111\xe3 b\u1ecb l\u1ed7i. Qu\xfd kh\xe1ch vui l\xf2ng li\xean h\u1ec7 tr\u1ef1c ti\u1ebfp v\u1edbi s\u1ed1 Hotline 0868113025 (ho\u1eb7c Zalo) \u0111\u1ec3 \u0111\u01b0\u1ee3c x\u1eed l\xfd k\u1ecbp th\u1eddi"},9323:function(e,t,n){n.d(t,{H:function(){return m}});var a=n(4165),r=n(5861),c=n(9439),s=n(2751),l=n(6316),i=n(7313),o=n(5798),u=n(5831),d=n(8469),p=n(2440);function m(e){var t=(0,i.useState)(""),n=(0,c.Z)(t,2),m=n[0],x=n[1],h=(0,u.s)().socket;return(0,i.useEffect)((function(){var t=(0,s.x0)(8);h.emit(o.Q.initNewsAdd,t);var n="".concat(window.location.origin,"/upload?sessionId=").concat(t);l.toString(n,(function(e,t){e||x(t)})),h.on(o.Q.imageUploaded(t),function(){var t=(0,r.Z)((0,a.Z)().mark((function t(n){var r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new File([n],"payment-image.webp",{type:"image/webp"}),t.next=3,(0,p.vZ)(r);case 3:r.src=t.sent,r.id=(0,d.Wb)(),e(r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[]),{sessionQR:m}}},9522:function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var a=n(1413),r=n(4165),c=n(5861),s=n(9439),l=n(3061),i=n(658),o=n.n(i),u=n(573),d=n(9548),p=n(7313),m=n(5627),x=n(4511),h=n(7864),f=n(7890),v=n(8512),g=n(1716),w=n(5895),_=n(1110),b=n(8298),j=n(8941),N=n(6404),Z=n(7629),y=n(200),k=n(887),F=n(9323),S=n(5565),T=n(5993),E=n(699),C=n(3027),P=function(e){var t=e.province,n=e.ward,r=e.district,c=E.find((function(e){return parseInt(e.id,10)===t})),s=C.find((function(e){return parseInt(e.id,10)===r})),l=T.find((function(e){return parseInt(e.id,10)===n})),i="".concat(s.typeName," ").concat(s.name.startsWith("Qu\u1eadn")?s.name.substring(5):s.name);return(0,a.Z)((0,a.Z)({},e),{},{provinceName:"".concat(c.typeName," ").concat(null===c||void 0===c?void 0:c.name),districtName:i,wardName:null===l||void 0===l?void 0:l.name})},I=n(8469),U=n(2440),A=n(4885),L=n(5629),q=n(6417),D=j.Z.common,H=function(e){var t=e.action,n=e.houseType,a=e.width,r=e.length,c=e.address,s=a*r;s=Number.isInteger(s)?s:s.toFixed(2);var l=P(c),i=l.address,o=l.wardName,u=l.districtName,p=l.provinceName;return["".concat((0,d.t)(y.m3.find((function(e){return e.value===t})).name)," ").concat((0,d.t)(y.Wm.find((function(e){return e.value===n})).name)," ").concat(s,"m\xb2 (").concat(a," x ").concat(r,"m)"),"".concat(i,", ").concat(o,", ").concat(u,", ").concat(p)]};function O(){var e=(0,x.$)().t,t=(0,f.s0)(),n=(0,p.useState)(!1),i=(0,s.Z)(n,2),d=i[0],j=i[1],T=(0,m.cI)({defaultValues:{action:k.Hx.trade,houseType:k.tU.house,architecture:""}}),E=T.control,C=T.formState.errors,O=T.register,M=T.handleSubmit,Q=T.watch,W=(0,p.useState)(!1),R=(0,s.Z)(W,2),z=R[0],J=R[1],K=(0,p.useState)(!1),V=(0,s.Z)(K,2),Y=V[0],G=V[1],X=(0,p.useState)(!1),$=(0,s.Z)(X,2),B=$[0],ee=$[1],te=(0,p.useState)(null),ne=(0,s.Z)(te,2),ae=ne[0],re=ne[1],ce=(0,p.useState)(""),se=(0,s.Z)(ce,2),le=se[0],ie=se[1],oe=(0,p.useState)([]),ue=(0,s.Z)(oe,2),de=ue[0],pe=ue[1],me=(0,p.useState)(null),xe=(0,s.Z)(me,2),he=xe[0],fe=xe[1],ve=(0,F.H)((function(e){re(e),ie(URL.createObjectURL(e))})),ge=ve.sessionQR,we=Q("action"),_e=Q("houseType"),be=_e===k.tU.apartment?"".concat(e("eg"),": ").concat(e("apartment_structure_placeholder")):_e===k.tU.land?"".concat(e("eg"),": ").concat(e("land_structure_placeholder")):"".concat(e("eg"),": ").concat(e("structure_placeholder")),je=(0,p.useMemo)((function(){return we===k.Hx.trade?"billion":"million"}),[we]),Ne=+we===k.Hx.rent?y.Wm:y.Wm.filter((function(e){return e.value!==k.tU.office})),Ze=we===k.Hx.trade;function ye(e){return ke.apply(this,arguments)}function ke(){return(ke=(0,c.Z)((0,r.Z)().mark((function e(t){var n,c,l,i,o,d,p,m,x,h,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.length=+String(t.length).replaceAll(",","."),t.width=+String(t.width).replaceAll(",","."),n=H(t),c=(0,s.Z)(n,2),l=c[0],i=c[1],o=(0,A.lV)(l+"-"+i)+"-"+Date.now().toString(),d=+String(t.price).replaceAll(",","."),p=Ze?1e3*d:d,e.next=8,(0,g.Cj)(ae);case 8:return m=e.sent,x=m.data,e.next=12,Promise.all(de.map((function(e){return(0,g.Cj)(e)})));case 12:return h=e.sent,e.next=15,(0,u.ET)((0,u.hJ)(S.db,"properties"),(0,a.Z)((0,a.Z)((0,a.Z)({},t),P(t.address)),{},{price:p,slug:o,published:!1,hideVideo:!1,images:h.map((function(e){return e.data})),paymentImage:x,subject:l,featurePinned:!1,projectPinned:!1,createdAt:u.EK.now().seconds}));case 15:return f=e.sent,e.next=18,fetch(D.baseApiUrl+"/news-submission",{headers:{"Content-Type":"application/json",secret:D.secret},method:"POST",body:JSON.stringify({name:l,link:window.location.origin+"/chothue?slug=".concat(o)})});case 18:if(!he){e.next=21;break}return e.next=21,(0,g.Pe)(he,f.id);case 21:return e.abrupt("return",f);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fe=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(n){var a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ee(!0),e.prev=1,e.next=4,v.Am.promise(ye(n),{pending:"\u0110ang \u0111\u0103ng tin, vui l\xf2ng kh\xf4ng \u0111\xf3ng tab hi\u1ec7n t\u1ea1i",success:"\u0110\u0103ng tin BDS th\xe0nh c\xf4ng",error:Z.PU});case 4:a=e.sent,c=a.id,t("/cam-on/".concat(c)),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:return e.prev=11,ee(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,9,11,14]])})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var t=(0,c.Z)((0,r.Z)().mark((function t(){var n,c,s,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=(0,u.IO)((0,u.hJ)(S.db,"properties"),(0,u.Xo)("projectPinnedExpiredAt","desc"),(0,u.ar)("published","==",!0),(0,u.ar)("projectPinned","==",!0),(0,u.b9)(L.PROJECT_NEWS_LIMIT)),t.next=4,(0,u.PL)(n);case 4:if((c=t.sent).size!==L.PROJECT_NEWS_LIMIT){t.next=10;break}return s=c.docs[L.PROJECT_NEWS_LIMIT-1],l=(0,a.Z)({id:s.id},s.data()),v.Am.info("".concat(e("news_board_is_full_latest_news_will_expire_at")," ").concat(o()(1e3*l.projectPinnedExpiredAt).format("DD/MM/YYYY HH:mm A"))),t.abrupt("return");case 10:v.Am.info(e("news_board_is_empty_can_post_news_right_away")),G(!0),t.next=16;break;case 14:t.prev=14,t.t0=t.catch(0);case 16:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}();return(0,p.useEffect)((function(){document.title="\u0110\u0103ng tin"}),[]),(0,p.useEffect)((function(){var e=function(){var e=(new Date).getUTCHours()+7;j(e<8||e>=22)};e();var t=setInterval(e,1e3);return function(){clearInterval(t)}}),[]),d?(0,q.jsx)(_.x4,{title:e("announcement"),description:e("news_add_locked_description")}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(_.pU,{}),(0,q.jsxs)("div",{className:"my-5 mx-2 md:mx-10 lg:mx-20 xl:mx-32 flex gap-5 md:gap-10 lg:gap-20 xl:gap-32 text-xs sm:text-sm md:text-base",children:[(0,q.jsx)("div",{className:"sticky top-[100px] w-full h-[80vh] mx-auto hidden lg:block",style:{background:"url(".concat(w.E0,") center no-repeat"),backgroundSize:"cover"},children:(0,q.jsx)("div",{className:"absolute bottom-0 left-0 w-full text-white text-xl p-[20px] bg-black bg-opacity-50",children:(0,q.jsx)("p",{className:"text-center",children:e("post_real_estate_news")})})}),(0,q.jsxs)("form",{className:"grid grid-cols-4 w-full place-content-start gap-5",children:[(0,q.jsx)("div",{className:"col-span-4 text-center order-[-3]",children:z?(0,q.jsx)("div",{className:"col-span-4",children:(0,q.jsx)("p",{className:"text-base md:text-xl xl:text-2xl font-medium",children:e("posting_vip_news_will_continuously_display_on_homepage_please_click_check_news_button",{days:30})})}):(0,q.jsx)("h1",{className:"text-base md:text-xl xl:text-2xl font-medium",children:e("fill_in_real_estate_information")})}),(0,q.jsx)(_.cw,{className:"col-span-4 xl:col-span-1 order-[-1] xl:order-[-2]",htmlFor:"subject",label:e("trade_rent"),error:C.subject,children:(0,q.jsx)("select",(0,a.Z)((0,a.Z)({},O("action",{required:!0,valueAsNumber:!0})),{},{className:"input",children:y.m3.map((function(t){return(0,q.jsx)("option",{value:t.value,children:e(t.name)},t.value)}))}))}),(0,q.jsxs)("div",{className:"col-span-4 xl:col-span-3 order-[-2] xl:order-[-1] flex justify-center items-center rounded text-xs md:text-sm",children:[(0,q.jsx)("div",{className:(0,l.Z)("px-3 py-1 bg-gray-200 border-2 border-gray-200 rounded-l cursor-pointer transition-colors",!z&&"!bg-blue-500 text-white"),onClick:function(){return J(!1)},children:e("normal_news_posting")}),(0,q.jsxs)("div",{className:(0,l.Z)("flex items-center gap-1 px-3 py-1 bg-gray-200 border-2 border-gray-200 rounded-r cursor-pointer transition-colors",z&&"!bg-blue-500 text-white"),onClick:function(){return J(!0)},children:[e("vip_news_posting"),(0,q.jsx)(h.dzv,{className:"text-base"})]})]}),(0,q.jsx)(_.cw,{className:"col-span-2 xl:col-span-1",htmlFor:"type",label:e("type"),error:C.houseType,children:(0,q.jsx)("select",(0,a.Z)((0,a.Z)({},O("houseType",{required:!0,valueAsNumber:!0})),{},{className:"input",children:Ne.map((function(t){return(0,q.jsx)("option",{value:t.value,children:e(t.name)},t.value)}))}))}),(0,q.jsx)(_.cw,{className:"col-span-2 xl:col-span-1",htmlFor:"width",label:e("width_m"),error:C.width,children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},O("width",{required:!0,min:0,max:1e4,validate:I.T0})),{},{className:"input",placeholder:e("enter_width"),type:"text",onKeyDown:I.ie,min:0,max:1e4}))}),(0,q.jsx)(_.cw,{className:"col-span-2 xl:col-span-1",htmlFor:"length",label:e("length_m"),error:C.length,children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},O("length",{required:!0,min:0,max:1e4,validate:I.T0})),{},{className:"input",placeholder:e("enter_length"),type:"text",onKeyDown:I.ie,min:0,max:1e4}))}),(0,q.jsx)(_.cw,{className:"col-span-2 xl:col-span-1",htmlFor:"price",label:we===k.Hx.trade?"".concat(e("price")," (").concat(e(je)," \u0111\u1ed3ng)"):"".concat(e("price")," (").concat(e("million"),"/").concat(e("month"),")"),error:C.price,children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},O("price",{required:!0,min:0,max:1e4,validate:I.T0})),{},{className:"input",placeholder:"".concat(e("eg"),": ").concat(we===k.Hx.trade?"0,35 (0.35)":"0,5"),type:"text",onKeyDown:I.ie,min:0,max:1e4}))}),(0,q.jsx)(_.cw,{className:"xl:col-span-2 col-span-4",htmlFor:"structure",label:_e===k.tU.apartment?e("floor"):e("structure"),error:C.structure,children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},O("structure",{required:!0})),{},{className:"input",placeholder:be,type:"text"}))}),(0,q.jsx)(_.cw,{className:"xl:col-span-1 col-span-4",htmlFor:"architecture",label:e("architecture"),error:C.architecture,children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},O("architecture")),{},{className:"input",placeholder:_e===k.tU.land?"(".concat(e("leave_empty"),")"):"".concat(e("eg"),": ").concat(e("architecture_placeholder")),type:"text"}))}),(0,q.jsx)(_.cw,{className:"xl:col-span-1 col-span-4",htmlFor:"direction",label:e("direction"),error:C.direction,children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},O("direction",{maxLength:500})),{},{className:"input",placeholder:e("enter_direction"),type:"text"}))}),(0,q.jsx)(_.cw,{className:"col-span-4",htmlFor:"address",label:e("address"),children:(0,q.jsx)(m.Qr,{control:E,name:"address",defaultValue:b.W,rules:{required:!0,validate:function(t){var n,a=Object.entries(t),r=e("pick");return a.forEach((function(t){var a=(0,s.Z)(t,2),c=a[0];if(a[1]);else switch(c){case"ward":return void(n=e("ward"));case"district":return void(n=e("district"));case"province":return void(n=e("province"));case"address":return n=e("address"),void(r=e("enter"))}})),!n||"".concat(e("please")," ").concat(r," ").concat(n)}},render:function(t){var n=t.field,a=n.value,r=n.onChange,c=t.fieldState.error;return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(_.i$,{value:a,onChange:r}),(0,q.jsx)(_.Xq,{label:e("address"),error:c})]})}})}),(0,q.jsx)(_.cw,{className:"col-span-2",htmlFor:"contactName",label:e("contact_name"),error:C.contactName,children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},O("contactName",{required:!0})),{},{className:"input",placeholder:e("contact_name_placeholder"),type:"text"}))}),(0,q.jsx)(_.cw,{className:"col-span-2",htmlFor:"contactNumber",label:e("contact_number"),error:C.contactNumber,children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},O("contactNumber",{required:!0,pattern:/^0/})),{},{className:"input",maxLength:10,placeholder:"0911xxxxxx",onKeyDown:I.EA,type:"text"}))}),(0,q.jsx)(_.cw,{className:"col-span-4",htmlFor:"description",label:e("description"),error:C.description,children:(0,q.jsx)("textarea",(0,a.Z)((0,a.Z)({},O("description",{required:!0,maxLength:650})),{},{className:"input resize-none",placeholder:"".concat(e("eg"),": ").concat(e("address_placeholder")),rows:5,maxLength:N.aw}))}),(0,q.jsx)(_.cw,{className:"col-span-4",htmlFor:"addressLink",label:e("address_link"),children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},O("addressLink")),{},{className:"input",placeholder:e("enter_address_link"),type:"text"}))}),(0,q.jsx)("div",{className:"col-span-4",children:(0,q.jsx)("label",{htmlFor:"",children:(0,q.jsx)("div",{className:"relative aspect-vid",children:(0,q.jsx)("iframe",{className:"absolute top-0 left-0 w-full h-full",src:"https://www.youtube.com/embed/IJPb7lo6CK4?autoplay=1",title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})})}),(0,q.jsxs)("div",{className:"col-span-4",children:[(0,q.jsx)("h1",{className:"text-base md:text-xl xl:text-2xl font-medium mb-5",children:e("please_proceed_to_payment_in_order_to_post_news")}),!z&&(0,q.jsx)(_.qv,{sessionQR:ge}),z&&!Y&&(0,q.jsx)(q.Fragment,{children:(0,q.jsx)("button",{className:"btn w-full md:w-[259px] mx-auto",type:"button",onClick:Se,children:e("check_news_board")})}),z&&Y&&(0,q.jsx)(_.qv,{sessionQR:ge}),(z&&Y||!z)&&!le&&(0,q.jsx)(_.cw,{className:"col-span-4",htmlFor:"images",label:"",children:(0,q.jsx)(_.Ur,{accepts:U.Gs,limitMb:N.Te,className:"mx-auto w-full md:w-[259px]",placeholder:e("upload_receipt_screenshot"),onChange:function(e){var t=e[0];t?re(t):(re(null),pe([]),fe(null))}})})]}),(0,q.jsx)("div",{className:"col-span-4",children:(0,q.jsx)("p",{dangerouslySetInnerHTML:{__html:e("upload_the_screenshot_of_the_receipt_then_click_submit_button")}})}),le&&(0,q.jsx)("div",{className:"col-span-4",children:(0,q.jsxs)("div",{className:"relative mx-auto w-full md:w-[259px]",children:[(0,q.jsx)("img",{className:"w-full rounded",src:le,alt:""}),(0,q.jsx)(h.oHP,{color:"#000",size:21,className:"absolute select-none rounded-full shadow cursor-pointer bg-white top-1 right-1 p-1",onClick:function(){re(null),ie("")}})]})}),!!ae&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(_.cw,{className:"col-span-4",htmlFor:"images",label:e("images"),children:(0,q.jsx)(_.Ur,{accepts:U.Gs,multiple:!0,limitMb:N.Te,max:N.Vv,uploaderCls:"mx-auto w-full md:w-[259px]",className:"col-span-4 mx-auto w-full",placeholder:e("upload_or_drag_and_drop_image"),onChange:pe})}),(0,q.jsxs)(_.cw,{className:"col-span-4",htmlFor:"video",label:e("video"),children:[(0,q.jsx)("small",{children:e("maximum_file_size_limit_mb_video_length",{size:300})}),(0,q.jsx)(_.Ur,{limitMb:300,accept:"video/*",accepts:U.WZ,className:"col-span-4 mx-auto w-full",placeholder:e("upload_or_drag_and_drop_video"),onChange:function(e){var t;return fe(null!==(t=e[0])&&void 0!==t?t:null)}})]})]}),(0,q.jsx)("div",{className:"col-span-4 ",children:(0,q.jsx)("button",{type:"button",disabled:B,onClick:function(){M((function(e){ae?Fe(e):v.Am.warn("Vui l\xf2ng t\u1ea3i l\xean \u1ea3nh ch\u1ee5p h\xf3a \u0111\u01a1n \u0111\u1ec3 \u0111\u0103ng b\xe0i")}))()},className:"btn w-full md:w-[259px] mx-auto mt-5",children:B?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(h.Z7b,{className:"animate-spin"}),e("uploading_news")]}):e("submit")})})]})]})]})}}}]);