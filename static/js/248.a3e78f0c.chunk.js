"use strict";(self.webpackChunkvialand=self.webpackChunkvialand||[]).push([[248],{4396:function(n,e,t){t.d(e,{pM:function(){return r},Cj:function(){return m.Cj},cx:function(){return h},$m:function(){return p},EC:function(){return x}});var r={};t.r(r),t.d(r,{deleteById:function(){return l},deposit:function(){return a},getAll:function(){return s},getById:function(){return d},verify:function(){return o}});var i=t(8941),u=t(9869),c=i.Z.common.baseApiUrl,s=function(n){return(0,u.Z)("GET",c+"/deposit",n).then((function(n){return n.data}))},a=function(n){return(0,u.Z)("POST",c+"/deposit",n)},o=function(n){return(0,u.Z)("PATCH",c+"/deposit/".concat(n,"/verify"))},l=function(n){return(0,u.Z)("DELETE",c+"/deposit/".concat(n))},d=function(n){return(0,u.Z)("GET",c+"/deposit/".concat(n))},f=(t(3531),i.Z.common.baseApiUrl),p=function(){return(0,u.Z)("GET",f+"/renew")},h=function(n,e,t){return(0,u.Z)("POST",f+"/news",{fbId:n,pinned:e,projectPinnedExpiredAt:t})},x=function(){return(0,u.Z)("POST",f+"/news/sync")},m=t(1716)},1716:function(n,e,t){t.d(e,{Cj:function(){return a},Pe:function(){return o},hF:function(){return l},ws:function(){return c},wt:function(){return s}});var r=t(8941),i=t(9869),u=r.Z.common.baseApiUrl+"/upload",c=function(n){var e=new FormData;return e.append("file",n),(0,i.Z)("POST",u,e)},s=function(n){return(0,i.Z)("DELETE",u,{ids:n})},a=function(n){var e=new FormData;return e.append("file",n),(0,i.Z)("POST",u+"/google-img",e)},o=function(n,e){var t=new FormData;return t.append("file",n),t.append("newsId",e),(0,i.Z)("POST",u+"/google-vid",t)},l=function(n){return(0,i.Z)("DELETE",u+"/google",{ids:n})}},6791:function(n,e,t){t.d(e,{r:function(){return a}});var r=t(4165),i=t(5861),u=t(9439),c=t(7313),s=t(9225);function a(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=(0,c.useState)("idle"),a=(0,u.Z)(t,2),o=a[0],l=a[1],d=(0,c.useState)(null),f=(0,u.Z)(d,2),p=f[0],h=f[1],x=(0,c.useState)(null),m=(0,u.Z)(x,2),g=m[0],v=m[1],j="pending"===o,b="error"===o,Z="error"===o||"success"===o,w=(0,c.useCallback)(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l("pending"),h(null),v(null),e.prev=3,e.next=6,n();case 6:return i=e.sent,t&&(h(i),l("success")),e.abrupt("return",i);case 11:e.prev=11,e.t0=e.catch(3),t&&(l("error"),v(e.t0));case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(n){return e.apply(this,arguments)}}(),[n]);return(0,s.u)((function(n){e&&w(n())}),[e]),(0,c.useEffect)((function(){return function(){l("idle"),h(null),v(null)}}),[]),{isLoading:j,isError:b,status:o,data:p,error:g,isComplete:Z,execute:function(){return w(!0)}}}},9225:function(n,e,t){t.d(e,{u:function(){return i}});var r=t(7313);function i(n,e){var t=(0,r.useRef)(n);t.current=n;var i=(0,r.useRef)(!1);(0,r.useEffect)((function(){return i.current=!0,t.current((function(){return i.current})),function(){i.current=!1}}),e)}},8468:function(n,e,t){t.d(e,{K:function(){return c}});var r=t(1172),i=t(7313),u=t(7890);function c(n){var e=(0,u.TH)(),t=e.pathname,c=e.search,s=(0,u.s0)(),a=(0,i.useMemo)((function(){return r.parse(c)}),[c]),o=(0,i.useCallback)((function(n){s(t+"?"+r.stringify(n,{skipEmptyString:!0,skipNull:!0}),{replace:!0})}),[t,s]);return(0,i.useEffect)((function(){n&&o(n)}),[]),[a,o]}},248:function(n,e,t){t.r(e),t.d(e,{default:function(){return j}});var r=t(1413),i=t(4165),u=t(5861),c=t(9439),s=t(3061),a=t(658),o=t.n(a),l=t(7313),d=t(7864),f=t(8512),p=t(4396),h=t(1110),x=t(6791),m=t(8468),g=t(8469),v=t(6417);function j(){var n,e=(0,m.K)({page:1,pageSize:20}),t=(0,c.Z)(e,2),a=t[0],j=t[1],b=(0,x.r)((function(){return p.pM.getAll(a)}),!1),Z=b.execute,w=b.data,y=b.isLoading;(0,l.useEffect)((function(){Z()}),[a]);var E=function(){var n=(0,u.Z)((0,i.Z)().mark((function n(e){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:f.Am.promise(p.pM.verify(e).then(Z),{pending:"\u0110ang x\xe1c th\u1ef1c",success:"X\xe1c th\u1ef1c th\xe0nh c\xf4ng",error:"X\xe1c th\u1ef1c th\u1ea5t b\u1ea1i"});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),N=function(){var n=(0,u.Z)((0,i.Z)().mark((function n(e){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:f.Am.promise(p.pM.deleteById(e).then(Z),{pending:"\u0110ang x\xf3a",success:"X\xf3a th\xe0nh c\xf4ng",error:"X\xf3a th\u1ea5t b\u1ea1i"});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return y?(0,v.jsx)(h.x4,{title:"Loading..."}):w?(0,v.jsxs)("div",{className:"min-h-screen p-5",children:[(0,v.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mb-5",children:[(0,v.jsx)("h1",{className:"font-medium text-base md:text-lg",children:"Danh s\xe1ch n\u1ea1p ti\u1ec1n"}),(0,v.jsx)("div",{className:"flex-grow"}),(0,v.jsxs)("button",{className:"btn",onClick:Z,children:[(0,v.jsx)(d.Em2,{}),"Refresh"]})]}),(0,v.jsxs)("table",{children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"S\u0110T"}),(0,v.jsx)("th",{children:"S\u1ed1 ti\u1ec1n"}),(0,v.jsx)("th",{children:"Th\u1eddi gian"}),(0,v.jsx)("th",{children:"\u1ea2nh thanh to\xe1n"}),(0,v.jsx)("th",{children:"Tr\u1ea1ng th\xe1i"})]})}),(0,v.jsx)("tbody",{children:(null!==(n=w.deposits)&&void 0!==n?n:[]).map((function(n){return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:(0,v.jsx)("p",{className:"mx-auto text-sm",children:n.phoneNumber})}),(0,v.jsx)("td",{children:(0,v.jsx)("p",{className:"mx-auto text-sm",children:Intl.NumberFormat("vi-VN",{currency:"VND"}).format(n.amount)})}),(0,v.jsx)("td",{children:(0,v.jsx)("p",{className:"mx-auto text-sm",children:o()(n.createdAt).format("DD/MM/YYYY - HH:mm")})}),(0,v.jsx)("td",{children:n.paymentImageId?(0,v.jsx)(h.Ee,{title:"\u1ea2nh thanh to\xe1n",className:"relative mx-auto w-[150px] h-[150px] object-cover",src:(0,g.OD)(n.paymentImageId)}):"---"}),(0,v.jsx)("td",{align:"center",children:(0,v.jsxs)("div",{className:"flex gap-2 justify-center",children:[!n.verified&&(0,v.jsx)("button",{className:(0,s.Z)("btn flex items-center gap-1 justify-center rounded p-2 cursor-pointer hover:shadow hover:bg-blue-400 transition-all",n.verified?"pointer-events-none cursor-not-allowed bg-gray-400 text-gray-50":"text-white bg-blue-500"),onClick:function(){return E(n._id)},children:(0,v.jsx)("span",{className:"text-xs",children:"Duy\u1ec7t"})}),(0,v.jsxs)("button",{className:(0,s.Z)("btn flex items-center gap-1 justify-center rounded p-2 cursor-pointer hover:shadow hover:bg-red-400 transition-all",n.verified?"pointer-events-none cursor-not-allowed bg-gray-400 text-gray-50":"text-white bg-red-500"),onClick:function(){return N(n._id)},children:[n.verified?(0,v.jsx)(d.bzc,{}):(0,v.jsx)(d.VPh,{}),(0,v.jsx)("span",{className:"text-xs",children:n.verified?"Xong":"X\xf3a"})]})]})})]},n._id)}))})]}),(0,v.jsx)(h.tl,{page:a.page,limit:a.pageSize,total:w.total,onPageChange:function(n){j((0,r.Z)((0,r.Z)({},a),{},{page:n}))}})]}):null}}}]);