"use strict";(self.webpackChunkvialand=self.webpackChunkvialand||[]).push([[600],{1716:function(e,n,t){t.d(n,{Cj:function(){return s},Pe:function(){return o},hF:function(){return l},ws:function(){return u},wt:function(){return c}});var r=t(8941),a=t(9869),i=r.Z.common.baseApiUrl+"/upload",u=function(e){var n=new FormData;return n.append("file",e),(0,a.Z)("POST",i,n)},c=function(e){return(0,a.Z)("DELETE",i,{ids:e})},s=function(e){var n=new FormData;return n.append("file",e),(0,a.Z)("POST",i+"/google-img",n)},o=function(e,n){var t=new FormData;return t.append("file",e),t.append("newsId",n),(0,a.Z)("POST",i+"/google-vid",t)},l=function(e){return(0,a.Z)("DELETE",i+"/google",{ids:e})}},7629:function(e,n,t){t.d(n,{PU:function(){return i},ZE:function(){return a},vh:function(){return r}});var r="\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i sau \xedt ph\xfat",a="\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng li\xean h\u1ec7 qu\u1ea3n tr\u1ecb vi\xean",i="Qu\xe1 tr\xecnh t\u1ea3i l\xean \u0111\xe3 b\u1ecb l\u1ed7i. Qu\xfd kh\xe1ch vui l\xf2ng li\xean h\u1ec7 tr\u1ef1c ti\u1ebfp v\u1edbi s\u1ed1 Hotline 0868113025 (ho\u1eb7c Zalo) \u0111\u1ec3 \u0111\u01b0\u1ee3c x\u1eed l\xfd k\u1ecbp th\u1eddi"},6791:function(e,n,t){t.d(n,{r:function(){return s}});var r=t(4165),a=t(5861),i=t(9439),u=t(7313),c=t(9225);function s(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=(0,u.useState)("idle"),s=(0,i.Z)(t,2),o=s[0],l=s[1],d=(0,u.useState)(null),f=(0,i.Z)(d,2),p=f[0],x=f[1],v=(0,u.useState)(null),h=(0,i.Z)(v,2),m=h[0],g=h[1],b="pending"===o,Z="error"===o,j=(0,u.useCallback)(function(){var n=(0,a.Z)((0,r.Z)().mark((function n(t){var a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l("pending"),x(null),g(null),n.prev=3,n.next=6,e();case 6:return a=n.sent,t&&(x(a),l("success")),n.abrupt("return",a);case 11:n.prev=11,n.t0=n.catch(3),t&&(l("error"),g(n.t0));case 14:case"end":return n.stop()}}),n,null,[[3,11]])})));return function(e){return n.apply(this,arguments)}}(),[e]);return(0,c.u)((function(e){n&&j(e())}),[n]),(0,u.useEffect)((function(){return function(){l("idle"),x(null),g(null)}}),[]),{isLoading:b,isError:Z,status:o,data:p,error:m,execute:function(){return j(!0)}}}},9225:function(e,n,t){t.d(n,{u:function(){return a}});var r=t(7313);function a(e,n){var t=(0,r.useRef)(e);t.current=e;var a=(0,r.useRef)(!1);(0,r.useEffect)((function(){return a.current=!0,t.current((function(){return a.current})),function(){a.current=!1}}),n)}},6243:function(e,n,t){t.d(n,{db:function(){return b}});var r=t(271),a=t(995),i=t(573),u=t(6797),c=t(8941),s=c.Z.firebase,o=s.apiKey,l=s.appId,d=s.databaseURL,f=s.projectId,p=s.storageBucket,x=s.authDomain,v=s.messagingSenderId,h=c.Z.google.recaptchaSiteKey,m={apiKey:o,authDomain:x,databaseURL:d,projectId:f,storageBucket:p,messagingSenderId:v,appId:l},g=(0,r.ZF)(m),b=(0,i.ad)(g);(0,u.cF)(g),(0,a.yu)(g,{provider:new a.z9(h),isTokenAutoRefreshEnabled:!0})},7600:function(e,n,t){t.r(n),t.d(n,{default:function(){return y}});var r=t(4165),a=t(5861),i=t(3433),u=t(9439),c=t(573),s=t(7313),o=t(7864),l=t(9466),d=t(8512),f=t(1716),p=t(7629),x=t(6243),v=t(8469),h=t(3061),m=t(753),g=t(8941),b=t(6417);function Z(e){var n=e.data,t=e.first,r=e.last,a=e.loadingIds,i=void 0===a?[]:a,c=e.onMove,l=void 0===c?function(){}:c,d=e.onRemove,f=void 0===d?function(){}:d,p=s.useState(""),x=(0,u.Z)(p,2),v=x[0],Z=x[1];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"p-3 flex items-center gap-3 shadow rounded select-none",children:[(0,b.jsxs)("span",{className:"text-xs md:text-base",children:["#",n.index+1]}),(0,b.jsx)("a",{target:"_blank",rel:"noreferrer",className:"text-xs md:text-base text-blue-500 break-all",href:n.url,children:n.url}),(0,b.jsx)("div",{className:"flex-grow"}),i.includes(n.id)?(0,b.jsx)(o.Z7b,{className:"text-xl text-blue-500 animate-spin"}):(0,b.jsxs)("div",{className:"flex items-center gap-2 text-lg md:text-2xl",children:[(0,b.jsx)(o.w8I,{className:"text-lg md:text-xl text-blue-500 hover:text-blue-600 cursor-pointer",onClick:function(){return Z(n.picture)},title:"Xem"}),(0,b.jsx)(o.Vs3,{className:(0,h.Z)("cursor-pointer",t?"text-gray-400 pointer-events-none":"text-green-500 hover:text-green-600"),title:"L\xean",onClick:function(){return l("up",n.id)}}),(0,b.jsx)(o.Vs3,{className:(0,h.Z)("rotate-180 cursor-pointer",r?"text-gray-400 pointer-events-none":"text-red-500 hover:text-red-600"),title:"Xu\u1ed1ng",onClick:function(){return l("down",n.id)}}),(0,b.jsx)(o.VPh,{className:"text-lg md:text-xl text-red-500 hover:text-red-600 cursor-pointer",title:"X\xf3a",onClick:function(){return f(n.id)}})]})]}),(0,b.jsx)(m.u_,{title:"H\xecnh \u1ea3nh",closeOnClickOutside:!0,open:!!v,onClose:function(){return Z("")},children:(0,b.jsx)("img",{className:"mx-auto",src:"".concat(g.Z.common.baseApiUrl,"/public/").concat(v,".webp"),alt:""})})]})}var j=t(1413),w=t(4925),k=t(6791),N=["execute"];function y(){var e=function(){var e=(0,k.r)((function(){return f.apply(this,arguments)}),!1),n=e.execute,t=(0,w.Z)(e,N),i=s.useState(!1),o=(0,u.Z)(i,2),l=o[0],d=o[1];function f(){return(f=(0,a.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=(0,c.IO)((0,c.hJ)(x.db,"banners"),(0,c.Xo)("index","asc")),t=[],e.next=5,(0,c.PL)(n);case 5:return e.sent.docs.forEach((function(e){t.push((0,j.Z)({id:e.id},e.data()))})),e.abrupt("return",t.sort((function(e,n){return e.index-n.index})));case 10:return e.prev=10,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",[]);case 14:return e.prev=14,d(!0),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,10,14,17]])})))).apply(this,arguments)}return s.useEffect((function(){!l&&n()}),[l]),(0,j.Z)({},t)}(),n=e.data,t=s.useState([]),h=(0,u.Z)(t,2),m=h[0],g=h[1],y=s.useState([]),E=(0,u.Z)(y,2),I=E[0],S=E[1];s.useEffect((function(){g(n)}),[n]);var C=function(e,n){var t=m?(0,i.Z)(m):[],r=t.findIndex((function(e){return e.id===n}));if(r>-1){var a="up"===e&&0!==r?r-1:"down"===e&&r!==(null===t||void 0===t?void 0:t.length)-1?r:void 0,u=(0,v.iD)(m,a),s=u.arr,o=u.t1,l=u.t2,d=(0,c.JU)(x.db,"banners",o.id),f=(0,c.JU)(x.db,"banners",l.id);S([o.id,l.id]),Promise.all([(0,c.pl)(d,o),(0,c.pl)(f,l)]).then((function(){g(s)})).catch().finally((function(){S([])}))}},D=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t,a,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S([n]),t=m?(0,i.Z)(m):[],a=t.findIndex((function(e){return e.id===n})),e.prev=3,!(a>-1)){e.next=10;break}return u=(0,c.JU)(x.db,"banners",n),e.next=8,Promise.all([(0,c.oe)(u),f.wt([t[a].picture])]);case 8:t.splice(a,1),d.Am.success("X\xf3a th\xe0nh c\xf4ng");case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),d.Am.error(p.vh);case 15:return e.prev=15,g(t),S([]),e.finish(15);case 19:case"end":return e.stop()}}),e,null,[[3,12,15,19]])})));return function(n){return e.apply(this,arguments)}}();return(0,b.jsxs)("div",{className:"min-h-screen p-5",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mb-5",children:[(0,b.jsx)("h1",{className:"font-medium text-base md:text-lg",children:"Danh s\xe1ch banner"}),(0,b.jsx)("div",{className:"flex-grow"}),(0,b.jsx)(l.rU,{to:"/chothue/tao-banner",children:(0,b.jsxs)("button",{className:"btn",children:[(0,b.jsx)(o.Lfi,{}),"T\u1ea1o banner"]})})]}),(0,b.jsx)("div",{className:"space-y-5",children:null===m||void 0===m?void 0:m.map((function(e,n){return(0,b.jsx)(Z,{data:e,first:0===n,last:n===m.length-1,loadingIds:I,onMove:C,onRemove:D},e.id)}))})]})}}}]);