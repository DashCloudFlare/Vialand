"use strict";(self.webpackChunkvialand=self.webpackChunkvialand||[]).push([[652,974],{6791:function(e,n,t){t.d(n,{r:function(){return i}});var r=t(4165),u=t(5861),s=t(9439),a=t(7313),c=t(9225);function i(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=(0,a.useState)("idle"),i=(0,s.Z)(t,2),l=i[0],o=i[1],f=(0,a.useState)(null),d=(0,s.Z)(f,2),p=d[0],h=d[1],v=(0,a.useState)(null),x=(0,s.Z)(v,2),m=x[0],g=x[1],b="pending"===l,N="error"===l,Z=(0,a.useCallback)(function(){var n=(0,u.Z)((0,r.Z)().mark((function n(t){var u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o("pending"),h(null),g(null),n.prev=3,n.next=6,e();case 6:return u=n.sent,t&&(h(u),o("success")),n.abrupt("return",u);case 11:n.prev=11,n.t0=n.catch(3),t&&(o("error"),g(n.t0));case 14:case"end":return n.stop()}}),n,null,[[3,11]])})));return function(e){return n.apply(this,arguments)}}(),[e]);return(0,c.u)((function(e){n&&Z(e())}),[n]),(0,a.useEffect)((function(){return function(){o("idle"),h(null),g(null)}}),[]),{isLoading:b,isError:N,status:l,data:p,error:m,execute:function(){return Z(!0)}}}},3737:function(e,n,t){t.d(n,{M:function(){return s}});var r=t(9439),u=t(7313);function s(e){var n=e.ref,t=e.offset,s=void 0===t?50:t,a=e.loading,c=e.canLoadMore,i=e.fetchFn,l=(0,u.useState)(!1),o=(0,r.Z)(l,2),f=o[0],d=o[1];(0,u.useEffect)((function(){if(null!==n&&void 0!==n&&n.current){var e=function(e){var n=e.target,t=n.getBoundingClientRect().height;n.scrollTop+t>=n.scrollHeight-s?d(!0):d(!1)};return null===n||void 0===n||n.current.addEventListener("scroll",e),function(){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.removeEventListener("scroll",e)}}if(document){var t=function(e){var n=e.currentTarget,t=n.getElementById("footer"),r=n.scrollingElement,u=r.scrollHeight,a=r.scrollTop,c=r.clientHeight;Math.abs(u-c-a)<t.getBoundingClientRect().height+s?d(!0):d(!1)};return document.addEventListener("scroll",t),function(){document.removeEventListener("scroll",t)}}}),[]),(0,u.useEffect)((function(){f&&!a&&c&&(null===i||void 0===i||i())}),[f])}},9225:function(e,n,t){t.d(n,{u:function(){return u}});var r=t(7313);function u(e,n){var t=(0,r.useRef)(e);t.current=e;var u=(0,r.useRef)(!1);(0,r.useEffect)((function(){return u.current=!0,t.current((function(){return u.current})),function(){u.current=!1}}),n)}},8468:function(e,n,t){t.d(n,{K:function(){return a}});var r=t(7313),u=t(7890),s=t(1172);function a(){var e=(0,u.TH)(),n=e.pathname,t=e.search,a=(0,u.s0)();return[(0,r.useMemo)((function(){return s.parse(t)}),[t]),(0,r.useCallback)((function(e){a(n+"?"+s.stringify(e,{skipEmptyString:!0,skipNull:!0}),{replace:!0})}),[n,a])]}},3974:function(e,n,t){t.r(n),t.d(n,{default:function(){return w}});var r=t(9439),u=t(3061),s=t(7313),a=t(4511),c=t(7864),i=t(8512),l=t(9542),o=t(8468),f=t(3433),d=t(4165),p=t(1413),h=t(5861),v=t(4925),x=t(573),m=t(6791),g=t(3737),b=t(5565),N=["execute"];var Z=t(6417),j=(0,s.memo)((function(e){var n=e.user,t=e.data,r=void 0===t?[]:t,u=e.pushNews;return(0,Z.jsx)(Z.Fragment,{children:r.map((function(e){return(0,Z.jsx)(l.eu,{data:e,user:n,onPushNews:u},e.id)}))})}));function w(e){var n=e.readOnly,t=void 0!==n&&n,w=e.user,y=(0,a.$)().t,k=(0,s.useRef)(null),E=(0,s.useRef)(null),L=(0,o.K)(),S=(0,r.Z)(L,2),C=S[0],R=S[1],M=function(e,n,t){var u=(0,a.$)().t,c=(0,s.useState)(!1),l=(0,r.Z)(c,2),o=l[0],Z=l[1],j=(0,s.useState)([]),w=(0,r.Z)(j,2),y=w[0],k=w[1],E=(0,s.useState)(void 0),L=(0,r.Z)(E,2),S=L[0],C=L[1],R=(0,m.r)((function(){return _.apply(this,arguments)}),!1),M=R.execute,T=(0,v.Z)(R,N);function V(){return(V=(0,h.Z)((0,d.Z)().mark((function e(){var n;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M();case 3:(n=e.sent)&&k((function(e){return[].concat((0,f.Z)(e),(0,f.Z)(n))})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function _(){return(_=(0,h.Z)((0,d.Z)().mark((function e(){var r,u,s,a,c;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=[],n&&r.push((0,x.ar)("contactNumber","==",n)),S&&r.push((0,x.TQ)(S)),t||r.push((0,x.ar)("published","==",!0),(0,x.b9)(10)),u=x.IO.apply(void 0,[(0,x.hJ)(b.db,"properties"),(0,x.Xo)("createdAt","desc")].concat(r)),s=[],e.next=9,(0,x.PL)(u);case 9:return a=e.sent,c=a.docs[a.docs.length-1],a.forEach((function(e){s.push((0,p.Z)({id:e.id},e.data()))})),C(c),Z(!1),e.abrupt("return",s);case 17:e.prev=17,e.t0=e.catch(0);case 19:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}(0,g.M)({ref:e,canLoadMore:!!S,loading:T.isLoading,fetchFn:function(){return V.apply(this,arguments)}});var B=function(){var e=(0,h.Z)((0,d.Z)().mark((function e(n,r){var s,a,c;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=14;break}if(s=y.slice(),!((a=s.findIndex((function(e){return e.id===n.id})))>-1)){e.next=14;break}return s[a]=(0,p.Z)((0,p.Z)({},s[a]),{},{published:!0}),e.prev=5,c=(0,x.JU)(b.db,"properties",n.id),e.next=9,(0,x.pl)(c,s[a]);case 9:i.Am.success(u("push_news_successfully")),k(s);case 11:return e.prev=11,r(),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[5,,11,14]])})));return function(n,t){return e.apply(this,arguments)}}(),H=(0,s.useCallback)((function(){k([]),C(void 0),Z(!0)}),[]);return(0,s.useEffect)((function(){H()}),[n]),(0,s.useEffect)((function(){function e(){return(e=(0,h.Z)((0,d.Z)().mark((function e(){var n;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:n=e.sent,k(null!==n&&void 0!==n?n:[]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o&&function(){e.apply(this,arguments)}()}),[o]),(0,p.Z)((0,p.Z)({},T),{},{data:y,clear:H,pushNews:B})}(k,C.phoneNumber,w),T=M.data,V=M.isLoading,_=M.pushNews;return(0,Z.jsxs)("div",{className:(0,u.Z)("h-full flex items-center flex-col",!t&&"p-2 md:p-5"),children:[!t&&(0,Z.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,Z.jsx)("input",{ref:E,defaultValue:C.phoneNumber,placeholder:"0911xxxxxx",className:"input",type:"text",maxLength:12}),(0,Z.jsxs)("button",{className:"btn",type:"button",onClick:function(){if(E.current){var e=E.current.value;e&&e.match(/^[0-9]*$/)?R({phoneNumber:e.trim()}):i.Am.warn("".concat(y("invalid_phone_number")))}},children:[(0,Z.jsx)(c.RB5,{}),y("search")]})]}),!V&&!(null!==T&&void 0!==T&&T.length)&&(0,Z.jsx)(l.x4,{title:"Kh\xf4ng c\xf3 th\xf4ng tin"}),(0,Z.jsxs)("div",{className:"max-w-[1000px] w-full flex-1 overflow-y-auto",ref:k,children:[(0,Z.jsx)(j,{data:T,user:w,pushNews:_}),V&&(0,Z.jsx)(l.x4,{title:(0,Z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Z.jsx)(c.Z7b,{className:"animate-spin"})," ",y("searching")]})})]})]})}},652:function(e,n,t){t.r(n),t.d(n,{default:function(){return p}});var r=t(9439),u=t(7313),s=t(613),a=t(8468),c=t(3974),i=t(4511),l=t(8821),o=t(9542),f=t(6417);function d(e){var n=e.user,t=e.profile,r=(0,i.$)().t;return n&&t?(0,f.jsxs)("div",{className:"p-5 w-full xl:w-72 h-fit flex-shrink-0 bg-white border rounded",children:[(0,f.jsxs)("div",{className:"flex justify-between items-end",children:[(0,f.jsx)(o.qE,{className:"!w-20 !h-20 ring ring-white"}),(0,f.jsxs)("div",{className:"flex items-center gap-2 px-2 bg-gray-50 rounded border",children:[(0,f.jsx)(l.jVv,{className:"text-green-500"}),(0,f.jsx)("span",{className:"font-bold",children:t.coins.toLocaleString("vi-VN",{currency:"VND"})}),(0,f.jsx)("button",{className:"bg-green-500 hover:bg-green-400 text-white rounded",children:(0,f.jsx)(l.L3d,{})})]})]}),(0,f.jsxs)("div",{className:"mt-5",children:[(0,f.jsx)("h1",{className:"font-bold truncate",children:n.displayName||n.phoneNumber}),(0,f.jsx)("ul",{className:"space-y-2 mt-2",children:(0,f.jsxs)("li",{children:[(0,f.jsxs)("span",{className:"text-gray-500",children:[r("join_at"),": "]})," ",new Date(n.metadata.creationTime).toLocaleDateString("vi-VN")]})})]})]}):null}function p(){var e=(0,s.P)(!0),n=e.user,t=e.profile,i=(0,a.K)(),l=(0,r.Z)(i,2),o=l[0],p=l[1];return(0,u.useEffect)((function(){n&&p({phoneNumber:"0"+n.phoneNumber.slice(3)})}),[n]),n?(0,f.jsxs)("div",{className:"max-w-[1024px] py-5 mx-auto flex flex-col xl:flex-row gap-2 h-full",children:[(0,f.jsx)(d,{user:n,profile:t}),(0,f.jsx)("div",{className:"flex-grow",children:o&&(0,f.jsx)(c.default,{readOnly:!0,user:n})})]}):null}}}]);