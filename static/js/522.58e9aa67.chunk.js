"use strict";(self.webpackChunkvialand=self.webpackChunkvialand||[]).push([[522],{9869:function(e,n,t){t.d(n,{Z:function(){return i}});var a=t(4165),r=t(5861),c=t(1172);function i(e,n,t){return s.apply(this,arguments)}function s(){return(s=(0,r.Z)((0,a.Z)().mark((function e(n,t,r){var i,s,l,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={method:n,mode:"cors",headers:{"Content-Type":"application/json",secret:"h6N&d3ZpiUZ@Mx9sjAF0!"}},s=t,r&&("GET"===n?(l=c.stringify(r),s+="?"+l):(i.body=r instanceof FormData?r:JSON.stringify(r),r instanceof FormData&&(i.headers={secret:"h6N&d3ZpiUZ@Mx9sjAF0!"}))),e.next=5,fetch(s,i);case 5:if(!(o=e.sent).ok){e.next=10;break}return e.next=9,o.json();case 9:return e.abrupt("return",e.sent);case 10:return e.abrupt("return",void 0);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1716:function(e,n,t){t.d(n,{Cj:function(){return l},Pe:function(){return o},hF:function(){return u},ws:function(){return i},wt:function(){return s}});var a=t(8941),r=t(9869),c=a.Z.common.baseApiUrl+"/upload",i=function(e){var n=new FormData;return n.append("file",e),(0,r.Z)("POST",c,n)},s=function(e){return(0,r.Z)("DELETE",c,{ids:e})},l=function(e){var n=new FormData;return n.append("file",e),(0,r.Z)("POST",c+"/google-img",n)},o=function(e,n){var t=new FormData;return t.append("file",e),t.append("newsId",n),(0,r.Z)("POST",c+"/google-vid",t)},u=function(e){return(0,r.Z)("DELETE",c+"/google",{ids:e})}},7629:function(e,n,t){t.d(n,{ZE:function(){return r},vh:function(){return a}});var a="\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i sau \xedt ph\xfat",r="\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng li\xean h\u1ec7 qu\u1ea3n tr\u1ecb vi\xean"},9522:function(e,n,t){t.r(n),t.d(n,{default:function(){return O}});var a=t(1413),r=t(4165),c=t(5861),i=t(9439),s=t(3061),l=t(658),o=t.n(l),u=t(573),d=t(9548),p=t(2751),m=t(6316),h=t(7313),x=t(5627),f=t(4511),g=t(7864),b=t(8512),v=t(1716),w=t(7265),j=t(753),N=t(8298),Z=t(8941),y=t(6404),T=t(7629),k=t(200),F=t(5831),S=t(887),C=t(6243),E=t(5993),D=t(699),L=t(3027),P=function(e){var n=e.province,t=e.ward,r=e.district,c=D.find((function(e){return parseInt(e.id,10)===n})),i=L.find((function(e){return parseInt(e.id,10)===r})),s=E.find((function(e){return parseInt(e.id,10)===t})),l="".concat(i.typeName," ").concat(i.name.startsWith("Qu\u1eadn")?i.name.substring(5):i.name);return(0,a.Z)((0,a.Z)({},e),{},{provinceName:"".concat(c.typeName," ").concat(null===c||void 0===c?void 0:c.name),districtName:l,wardName:null===s||void 0===s?void 0:s.name})},V=t(8469),A=t(2440),I=t(4885),M=t(5629),q=t(6417),U=Z.Z.common,H=function(e){var n=e.action,t=e.houseType,a=e.width,r=e.length,c=e.address,i=a*r;i=Number.isInteger(i)?i:i.toFixed(2);var s=P(c),l=s.address,o=s.wardName,u=s.districtName,p=s.provinceName;return["".concat((0,d.t)(k.m3.find((function(e){return e.value===n})).name)," ").concat((0,d.t)(k.Wm.find((function(e){return e.value===t})).name)," ").concat(i,"m\xb2 (").concat(a," x ").concat(r,"m)"),"".concat(l,", ").concat(o,", ").concat(u,", ").concat(p)]};function O(){var e=(0,f.$)().t,n=(0,x.cI)({defaultValues:{action:S.Hx.trade,houseType:S.tU.house,architecture:""}}),t=n.control,l=n.formState.errors,d=n.register,Z=n.handleSubmit,E=n.watch,D=(0,F.s)().socket,L=(0,h.useState)(!1),O=(0,i.Z)(L,2),K=O[0],W=O[1],J=(0,h.useState)(!1),R=(0,i.Z)(J,2),z=R[0],G=R[1],_=(0,h.useState)(!1),Y=(0,i.Z)(_,2),B=Y[0],Q=Y[1],X=(0,h.useState)(""),$=(0,i.Z)(X,2),ee=$[0],ne=$[1],te=(0,h.useState)(null),ae=(0,i.Z)(te,2),re=ae[0],ce=ae[1],ie=(0,h.useState)(""),se=(0,i.Z)(ie,2),le=se[0],oe=se[1],ue=(0,h.useState)([]),de=(0,i.Z)(ue,2),pe=de[0],me=de[1],he=(0,h.useState)(null),xe=(0,i.Z)(he,2),fe=xe[0],ge=xe[1],be=E("action"),ve=E("houseType"),we=ve===S.tU.apartment?"VD: T\u1ea7ng 1":ve===S.tU.land?"VD: \u0110\u1ea5t \u1edf t\u1ea1i n\xf4ng th\xf4n":" VD: Tr\u1ec7t 01 L\u1eedng 01 L\u1ea7u",je=(0,h.useMemo)((function(){return be===S.Hx.trade?"billion":"million"}),[be]),Ne=+be===S.Hx.rent?k.Wm:k.Wm.filter((function(e){return e.value!==S.tU.office})),Ze=be===S.Hx.trade;function ye(e){return Te.apply(this,arguments)}function Te(){return(Te=(0,c.Z)((0,r.Z)().mark((function e(n){var t,c,s,l,o,d,p,m,h,x,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length=+String(n.length).replaceAll(",","."),n.width=+String(n.width).replaceAll(",","."),t=H(n),c=(0,i.Z)(t,2),s=c[0],l=c[1],o=(0,I.lV)(s+"-"+l)+"-"+Date.now().toString(),d=+String(n.price).replaceAll(",","."),p=Ze?1e3*d:d,e.next=8,(0,v.Cj)(re);case 8:return m=e.sent,h=m.data,e.next=12,Promise.all(pe.map((function(e){return(0,v.Cj)(e)})));case 12:return x=e.sent,e.next=15,(0,u.ET)((0,u.hJ)(C.db,"properties"),(0,a.Z)((0,a.Z)((0,a.Z)({},n),P(n.address)),{},{price:p,slug:o,published:!1,hideVideo:!1,images:x.map((function(e){return e.data})),paymentImage:h,subject:s,createdAt:u.EK.now().seconds}));case 15:return f=e.sent,e.next=18,fetch(U.baseApiUrl+"/news-submission",{headers:{"Content-Type":"application/json",secret:U.secret},method:"POST",body:JSON.stringify({name:s,link:window.location.origin+"/chothue?slug=".concat(o)})});case 18:if(!fe){e.next=21;break}return e.next=21,(0,v.Pe)(fe,f.id);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ke=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q(!0),e.prev=1,e.next=4,b.Am.promise(ye(n),{pending:"\u0110ang \u0111\u0103ng tin, vui l\xf2ng kh\xf4ng \u0111\xf3ng tab hi\u1ec7n t\u1ea1i",success:"\u0110\u0103ng tin BDS th\xe0nh c\xf4ng",error:T.vh});case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return e.prev=8,"undefined"!==typeof window&&"location"in window&&window.location.reload(),Q(!1),e.finish(8);case 12:case"end":return e.stop()}}),e,null,[[1,6,8,12]])})));return function(n){return e.apply(this,arguments)}}(),Fe=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(){var n,t,c,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=(0,u.IO)((0,u.hJ)(C.db,"properties"),(0,u.Xo)("projectPinnedExpiredAt","desc"),(0,u.ar)("published","==",!0),(0,u.ar)("projectPinned","==",!0),(0,u.b9)(M.PROJECT_NEWS_LIMIT)),e.next=4,(0,u.PL)(n);case 4:if((t=e.sent).size!==M.PROJECT_NEWS_LIMIT){e.next=10;break}return c=t.docs[M.PROJECT_NEWS_LIMIT-1],i=(0,a.Z)({id:c.id},c.data()),b.Am.info("B\u1ea3ng tin \u0111\xe3 \u0111\u1ea7y, tin cu\u1ed1i c\xf9ng s\u1ebd h\u1ebft h\u1ea1n v\xe0o l\xfac ".concat(o()(1e3*i.projectPinnedExpiredAt).format("DD/MM/YYYY HH:mm A"))),e.abrupt("return");case 10:b.Am.info("B\u1ea3ng tin c\xf2n tr\u1ed1ng, c\xf3 th\u1ec3 \u0111\u0103ng tin ngay"),G(!0),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return(0,h.useEffect)((function(){document.title="\u0110\u0103ng tin"}),[]),(0,h.useEffect)((function(){var e=(0,p.x0)(8);D.emit("init-news-add",e);var n="".concat(window.location.origin,"/upload?sessionId=").concat(e);m.toString(n,(function(e,n){e||ne(n)})),D.on("".concat(e,"-image-uploaded"),function(){var e=(0,c.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new File([n],"payment-image.webp",{type:"image/webp"}),e.next=3,(0,A.vZ)(t);case 3:t.src=e.sent,t.id=Math.floor(1e5*Math.random()).toString(),ce(t),oe(URL.createObjectURL(t));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}),[]),(0,q.jsxs)("div",{className:"my-5 mx-2 md:mx-10 lg:mx-20 xl:mx-32 flex gap-5 md:gap-10 lg:gap-20 xl:gap-32 text-xs sm:text-sm md:text-base",children:[(0,q.jsx)("div",{className:"sticky top-[100px] w-full h-[80vh] mx-auto hidden lg:block",style:{background:"url(".concat(w.E0,") center no-repeat"),backgroundSize:"cover"},children:(0,q.jsx)("div",{className:"absolute bottom-0 left-0 w-full text-white text-xl p-[20px] bg-black bg-opacity-50",children:(0,q.jsx)("p",{className:"text-center",children:"\u0110\u0103ng tin b\u1ea5t \u0111\u1ed9ng s\u1ea3n"})})}),(0,q.jsxs)("form",{className:"grid grid-cols-4 w-full place-content-start gap-5",children:[(0,q.jsxs)("div",{className:"col-span-4 xl:col-span-3",children:[K?(0,q.jsx)("div",{className:"col-span-4 mb-5",children:(0,q.jsx)("p",{className:"text-base md:text-xl xl:text-2xl font-medium",children:'\u0110\u0103ng tin VIP s\u1ebd hi\u1ec3n th\u1ecb li\xean t\u1ee5c 03 ng\xe0y tr\xean Trang ch\u1ee7. Vui l\xf2ng nh\u1ea5n n\xfat "Ki\u1ec3m tra b\u1ea3ng tin"'})}):(0,q.jsx)("h1",{className:"text-base md:text-xl xl:text-2xl font-medium",children:"\u0110i\u1ec1n th\xf4ng tin b\u1ea5t \u0111\u1ed9ng s\u1ea3n"}),(0,q.jsxs)("div",{className:"my-2 flex justify-center items-center rounded text-xs md:text-sm",children:[(0,q.jsx)("div",{className:(0,s.Z)("px-3 py-1 bg-gray-200 border-2 border-gray-200 rounded-l cursor-pointer transition-colors",!K&&"!bg-blue-500 text-white"),onClick:function(){return W(!1)},children:"\u0110\u0103ng tin th\u01b0\u1eddng"}),(0,q.jsxs)("div",{className:(0,s.Z)("flex items-center gap-1 px-3 py-1 bg-gray-200 border-2 border-gray-200 rounded-r cursor-pointer transition-colors",K&&"!bg-blue-500 text-white"),onClick:function(){return W(!0)},children:["\u0110\u0103ng tin VIP",(0,q.jsx)(g.dzv,{className:"text-base"})]})]})]}),(0,q.jsx)(j.cw,{className:"col-span-4 xl:col-span-1",htmlFor:"subject",label:"B\xe1n (Cho thu\xea)",error:l.subject,children:(0,q.jsx)("select",(0,a.Z)((0,a.Z)({},d("action",{required:!0,valueAsNumber:!0})),{},{className:"input",children:k.m3.map((function(n){return(0,q.jsx)("option",{value:n.value,children:e(n.name)},n.value)}))}))}),(0,q.jsx)(j.cw,{className:"col-span-2 xl:col-span-1",htmlFor:"type",label:"Lo\u1ea1i h\xecnh",error:l.houseType,children:(0,q.jsx)("select",(0,a.Z)((0,a.Z)({},d("houseType",{required:!0,valueAsNumber:!0})),{},{className:"input",children:Ne.map((function(n){return(0,q.jsx)("option",{value:n.value,children:e(n.name)},n.value)}))}))}),(0,q.jsx)(j.cw,{className:"col-span-2 xl:col-span-1",htmlFor:"width",label:"Chi\u1ec1u ngang (m)",error:l.width,children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},d("width",{required:!0,min:0,max:1e4,validate:V.T0})),{},{className:"input",placeholder:"Nh\u1eadp chi\u1ec1u ngang",type:"text",onKeyDown:V.ie,min:0,max:1e4}))}),(0,q.jsx)(j.cw,{className:"col-span-2 xl:col-span-1",htmlFor:"length",label:"Chi\u1ec1u d\xe0i (m)",error:l.length,children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},d("length",{required:!0,min:0,max:1e4,validate:V.T0})),{},{className:"input",placeholder:"Nh\u1eadp chi\u1ec1u d\xe0i",type:"text",onKeyDown:V.ie,min:0,max:1e4}))}),(0,q.jsx)(j.cw,{className:"col-span-2 xl:col-span-1",htmlFor:"price",label:be===S.Hx.trade?"Gi\xe1 (".concat(e(je)," \u0111\u1ed3ng)"):"Gi\xe1 (tri\u1ec7u/th\xe1ng)",error:l.price,children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},d("price",{required:!0,min:0,max:1e4,validate:V.T0})),{},{className:"input",placeholder:"VD: ".concat(be===S.Hx.trade?"0,35 (0.35)":"0,5"),type:"text",onKeyDown:V.ie,min:0,max:1e4}))}),(0,q.jsx)(j.cw,{className:"xl:col-span-2 col-span-4",htmlFor:"structure",label:ve===S.tU.apartment?"S\u1ed1 t\u1ea7ng":"K\u1ebft c\u1ea5u",error:l.structure,children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},d("structure",{required:!0})),{},{className:"input",placeholder:we,type:"text"}))}),(0,q.jsx)(j.cw,{className:"xl:col-span-1 col-span-4",htmlFor:"architecture",label:"Ki\u1ebfn tr\xfac",error:l.architecture,children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},d("architecture")),{},{className:"input",placeholder:ve===S.tU.land?"(\u0111\u1ec3 tr\u1ed1ng)":"VD: 2PN 1WC",type:"text"}))}),(0,q.jsx)(j.cw,{className:"xl:col-span-1 col-span-4",htmlFor:"direction",label:"H\u01b0\u1edbng",error:l.direction,children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},d("direction",{maxLength:500})),{},{className:"input",placeholder:"Nh\u1eadp h\u01b0\u1edbng",type:"text"}))}),(0,q.jsx)(j.cw,{className:"col-span-4",htmlFor:"address",label:"\u0110\u1ecba ch\u1ec9",children:(0,q.jsx)(x.Qr,{control:t,name:"address",defaultValue:N.W,rules:{required:!0,validate:function(e){var n,t=Object.entries(e),a="ch\u1ecdn";return t.forEach((function(e){var t=(0,i.Z)(e,2),r=t[0];if(t[1]);else switch(r){case"ward":return void(n="ph\u01b0\u1eddng / x\xe3");case"district":return void(n="qu\u1eadn / huy\u1ec7n");case"province":return void(n="t\u1ec9nh / th\xe0nh");case"address":return n="\u0111\u1ecba ch\u1ec9",void(a="nh\u1eadp")}})),!n||"Vui l\xf2ng ".concat(a," ").concat(n)}},render:function(e){var n=e.field,t=n.value,a=n.onChange,r=e.fieldState.error;return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(j.i$,{value:t,onChange:a}),(0,q.jsx)(j.Xq,{label:"\u0110\u1ecba ch\u1ec9",error:r})]})}})}),(0,q.jsx)(j.cw,{className:"col-span-2",htmlFor:"contactName",label:"T\xean li\xean h\u1ec7",error:l.contactName,children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},d("contactName",{required:!0})),{},{className:"input",placeholder:"Nguy\u1ec5n V\u0103n A",type:"text"}))}),(0,q.jsx)(j.cw,{className:"col-span-2",htmlFor:"contactNumber",label:"S\u0110T li\xean h\u1ec7",error:l.contactNumber,children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},d("contactNumber",{required:!0,pattern:/^0/})),{},{className:"input",maxLength:10,placeholder:"0911xxxxxx",onKeyDown:V.EA,type:"text"}))}),(0,q.jsx)(j.cw,{className:"col-span-4",htmlFor:"description",label:"Th\xf4ng tin",error:l.description,children:(0,q.jsx)("textarea",(0,a.Z)((0,a.Z)({},d("description",{required:!0,maxLength:650})),{},{className:"input resize-none",placeholder:"VD: G\u1ea7n ch\u1ee3, tr\u01b0\u1eddng h\u1ecdc...",rows:5,maxLength:y.aw}))}),(0,q.jsx)(j.cw,{className:"col-span-4",htmlFor:"addressLink",label:"Link google map",children:(0,q.jsx)("input",(0,a.Z)((0,a.Z)({},d("addressLink")),{},{className:"input",placeholder:"Nh\u1eadp link google map...",type:"text"}))}),(0,q.jsx)("div",{className:"col-span-4",children:(0,q.jsx)("label",{htmlFor:"",children:(0,q.jsx)("div",{className:"relative aspect-vid",children:(0,q.jsx)("iframe",{className:"absolute top-0 left-0 w-full h-full",src:"https://www.youtube.com/embed/IJPb7lo6CK4?autoplay=1",title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})})}),(0,q.jsxs)("div",{className:"col-span-4",children:[(0,q.jsx)("h1",{className:"text-base md:text-xl xl:text-2xl font-medium mb-5",children:"Vui l\xf2ng ti\u1ebfn h\xe0nh thanh to\xe1n \u0111\u1ec3 \u0111\u0103ng tin"}),!K&&(0,q.jsx)(j.qv,{sessionQR:ee}),K&&!z&&(0,q.jsx)(q.Fragment,{children:(0,q.jsx)("button",{className:"btn w-full md:w-[259px] mx-auto",type:"button",onClick:Fe,children:"Ki\u1ec3m tra b\u1ea3ng tin"})}),K&&z&&(0,q.jsx)(j.qv,{isVIP:!0,sessionQR:ee}),(K&&z||!K)&&!le&&(0,q.jsx)(j.cw,{className:"col-span-4",htmlFor:"images",label:"",children:(0,q.jsx)(j.Ur,{accepts:A.Gs,limitMb:y.Te,className:"mx-auto w-full md:w-[259px]",placeholder:"T\u1ea3i l\xean \u1ea3nh ch\u1ee5p h\xf3a \u0111\u01a1n",onChange:function(e){var n=e[0];n?ce(n):(ce(null),me([]),ge(null))}})})]}),(0,q.jsx)("div",{className:"col-span-4",children:(0,q.jsxs)("p",{children:["Ta\u0309i a\u0309nh chu\u0323p ho\u0301a \u0111\u01a1n \u0111a\u0303 thanh toa\u0301n l\xean r\xf4\u0300i b\xe2\u0301m nu\u0301t ",(0,q.jsx)("b",{children:"Hoa\u0300n t\xe2\u0301t"})]})}),le&&(0,q.jsx)("div",{className:"col-span-4",children:(0,q.jsxs)("div",{className:"relative mx-auto w-full md:w-[259px]",children:[(0,q.jsx)("img",{className:"w-full rounded",src:le,alt:""}),(0,q.jsx)(g.oHP,{color:"#000",size:21,className:"absolute select-none rounded-full shadow cursor-pointer bg-white top-1 right-1 p-1",onClick:function(){ce(null),oe("")}})]})}),!!re&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(j.cw,{className:"col-span-4",htmlFor:"images",label:"H\xecnh \u1ea3nh",children:(0,q.jsx)(j.Ur,{accepts:A.Gs,multiple:!0,limitMb:y.Te,max:y.Vv,uploaderCls:"mx-auto w-full md:w-[259px]",className:"col-span-4 mx-auto w-full",placeholder:"T\u1ea3i l\xean ho\u1eb7c k\xe9o th\u1ea3 h\xecnh \u1ea3nh",onChange:me})}),(0,q.jsxs)(j.cw,{className:"col-span-4",htmlFor:"video",label:"Link video",children:[(0,q.jsx)("small",{children:"Maximum file size limit is 300Mb.(Video Length 12-13 Minutes)"}),(0,q.jsx)(j.Ur,{limitMb:300,accept:"video/*",accepts:A.WZ,className:"col-span-4 mx-auto w-full",placeholder:"T\u1ea3i l\xean ho\u1eb7c k\xe9o th\u1ea3 video",onChange:function(e){var n;return ge(null!==(n=e[0])&&void 0!==n?n:null)}})]})]}),(0,q.jsx)("div",{className:"col-span-4 ",children:(0,q.jsxs)("button",{type:"button",disabled:B,onClick:function(){Z((function(e){re?ke(e):b.Am.warn("Vui l\xf2ng t\u1ea3i l\xean \u1ea3nh ch\u1ee5p h\xf3a \u0111\u01a1n \u0111\u1ec3 \u0111\u0103ng b\xe0i")}))()},className:"btn w-full md:w-[259px] mx-auto mt-5",children:[B&&(0,q.jsx)(g.Z7b,{className:"animate-spin"}),"Ho\xe0n t\u1ea5t"]})})]})]})}}}]);